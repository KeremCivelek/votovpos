/**
 * Minified by jsDelivr using Terser v5.13.1.
 * Original file: /npm/vuetify@2.6.6/lib/components/VDataIterator/VDataIterator.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{VData}from"../VData";import VDataFooter from"./VDataFooter";import Mobile from"../../mixins/mobile";import Themeable from"../../mixins/themeable";import mixins from"../../util/mixins";import{deepEqual,getObjectValueByPath,getPrefixedScopedSlots,getSlot,camelizeObjectKeys,keyCodes}from"../../util/helpers";import{breaking,removed}from"../../util/console";export default mixins(Mobile,Themeable).extend({name:"v-data-iterator",props:{...VData.options.props,itemKey:{type:String,default:"id"},value:{type:Array,default:()=>[]},singleSelect:Boolean,expanded:{type:Array,default:()=>[]},mobileBreakpoint:{...Mobile.options.props.mobileBreakpoint,default:600},singleExpand:Boolean,loading:[Boolean,String],noResultsText:{type:String,default:"$vuetify.dataIterator.noResultsText"},noDataText:{type:String,default:"$vuetify.noDataText"},loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideDefaultFooter:Boolean,footerProps:Object,selectableKey:{type:String,default:"isSelectable"}},data:()=>({selection:{},expansion:{},internalCurrentItems:[],shiftKeyDown:!1,lastEntry:-1}),computed:{everyItem(){return!!this.selectableItems.length&&this.selectableItems.every((e=>this.isSelected(e)))},someItems(){return this.selectableItems.some((e=>this.isSelected(e)))},sanitizedFooterProps(){return camelizeObjectKeys(this.footerProps)},selectableItems(){return this.internalCurrentItems.filter((e=>this.isSelectable(e)))}},watch:{value:{handler(e){this.selection=e.reduce(((e,t)=>(e[getObjectValueByPath(t,this.itemKey)]=t,e)),{})},immediate:!0},selection(e,t){deepEqual(Object.keys(e),Object.keys(t))||this.$emit("input",Object.values(e))},expanded:{handler(e){this.expansion=e.reduce(((e,t)=>(e[getObjectValueByPath(t,this.itemKey)]=!0,e)),{})},immediate:!0},expansion(e,t){if(deepEqual(e,t))return;const i=Object.keys(e).filter((t=>e[t])),s=i.length?this.items.filter((e=>i.includes(String(getObjectValueByPath(e,this.itemKey))))):[];this.$emit("update:expanded",s)}},created(){[["disable-initial-sort","sort-by"],["filter","custom-filter"],["pagination","options"],["total-items","server-items-length"],["hide-actions","hide-default-footer"],["rows-per-page-items","footer-props.items-per-page-options"],["rows-per-page-text","footer-props.items-per-page-text"],["prev-icon","footer-props.prev-icon"],["next-icon","footer-props.next-icon"]].forEach((([e,t])=>{this.$attrs.hasOwnProperty(e)&&breaking(e,t,this)}));["expand","content-class","content-props","content-tag"].forEach((e=>{this.$attrs.hasOwnProperty(e)&&removed(e)}))},mounted(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},beforeDestroy(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},methods:{onKeyDown(e){e.keyCode===keyCodes.shift&&(this.shiftKeyDown=!0)},onKeyUp(e){e.keyCode===keyCodes.shift&&(this.shiftKeyDown=!1)},toggleSelectAll(e){const t=Object.assign({},this.selection);for(let i=0;i<this.selectableItems.length;i++){const s=this.selectableItems[i];if(!this.isSelectable(s))continue;const o=getObjectValueByPath(s,this.itemKey);e?t[o]=s:delete t[o]}this.selection=t,this.$emit("toggle-select-all",{items:this.internalCurrentItems,value:e})},isSelectable(e){return!1!==getObjectValueByPath(e,this.selectableKey)},isSelected(e){return!!this.selection[getObjectValueByPath(e,this.itemKey)]||!1},select(e,t=!0,i=!0){if(!this.isSelectable(e))return;const s=this.singleSelect?{}:Object.assign({},this.selection),o=getObjectValueByPath(e,this.itemKey);t?s[o]=e:delete s[o];const n=this.selectableItems.findIndex((e=>getObjectValueByPath(e,this.itemKey)===o));if(-1===this.lastEntry)this.lastEntry=n;else if(this.shiftKeyDown&&!this.singleSelect&&i){const e=getObjectValueByPath(this.selectableItems[this.lastEntry],this.itemKey),t=Object.keys(this.selection).includes(String(e));this.multipleSelect(t,i,s,n)}if(this.lastEntry=n,this.singleSelect&&i){const e=Object.keys(this.selection),t=e.length&&getObjectValueByPath(this.selection[e[0]],this.itemKey);t&&t!==o&&this.$emit("item-selected",{item:this.selection[t],value:!1})}this.selection=s,i&&this.$emit("item-selected",{item:e,value:t})},multipleSelect(e=!0,t=!0,i,s){const o=s<this.lastEntry?s:this.lastEntry,n=s<this.lastEntry?this.lastEntry:s;for(let s=o;s<=n;s++){const o=this.selectableItems[s],n=getObjectValueByPath(o,this.itemKey);e?i[n]=o:delete i[n],t&&this.$emit("item-selected",{currentItem:o,value:e})}},isExpanded(e){return this.expansion[getObjectValueByPath(e,this.itemKey)]||!1},expand(e,t=!0){const i=this.singleExpand?{}:Object.assign({},this.expansion),s=getObjectValueByPath(e,this.itemKey);t?i[s]=!0:delete i[s],this.expansion=i,this.$emit("item-expanded",{item:e,value:t})},createItemProps(e,t){return{item:e,index:t,select:t=>this.select(e,t),isSelected:this.isSelected(e),expand:t=>this.expand(e,t),isExpanded:this.isExpanded(e),isMobile:this.isMobile}},genEmptyWrapper(e){return this.$createElement("div",e)},genEmpty(e,t){if(0===e&&this.loading){const e=this.$slots.loading||this.$vuetify.lang.t(this.loadingText);return this.genEmptyWrapper(e)}if(0===e){const e=this.$slots["no-data"]||this.$vuetify.lang.t(this.noDataText);return this.genEmptyWrapper(e)}if(0===t){const e=this.$slots["no-results"]||this.$vuetify.lang.t(this.noResultsText);return this.genEmptyWrapper(e)}return null},genItems(e){const t=this.genEmpty(e.originalItemsLength,e.pagination.itemsLength);return t?[t]:this.$scopedSlots.default?this.$scopedSlots.default({...e,isSelected:this.isSelected,select:this.select,isExpanded:this.isExpanded,isMobile:this.isMobile,expand:this.expand}):this.$scopedSlots.item?e.items.map(((e,t)=>this.$scopedSlots.item(this.createItemProps(e,t)))):[]},genFooter(e){if(this.hideDefaultFooter)return null;const t={props:{...this.sanitizedFooterProps,options:e.options,pagination:e.pagination},on:{"update:options":t=>e.updateOptions(t)}},i=getPrefixedScopedSlots("footer.",this.$scopedSlots);return this.$createElement(VDataFooter,{scopedSlots:i,...t})},genDefaultScopedSlot(e){const t={...e,someItems:this.someItems,everyItem:this.everyItem,toggleSelectAll:this.toggleSelectAll};return this.$createElement("div",{staticClass:"v-data-iterator"},[getSlot(this,"header",t,!0),this.genItems(e),this.genFooter(e),getSlot(this,"footer",t,!0)])}},render(){return this.$createElement(VData,{props:this.$props,on:{"update:options":(e,t)=>!deepEqual(e,t)&&this.$emit("update:options",e),"update:page":e=>this.$emit("update:page",e),"update:items-per-page":e=>this.$emit("update:items-per-page",e),"update:sort-by":e=>this.$emit("update:sort-by",e),"update:sort-desc":e=>this.$emit("update:sort-desc",e),"update:group-by":e=>this.$emit("update:group-by",e),"update:group-desc":e=>this.$emit("update:group-desc",e),pagination:(e,t)=>!deepEqual(e,t)&&this.$emit("pagination",e),"current-items":e=>{this.internalCurrentItems=e,this.$emit("current-items",e)},"page-count":e=>this.$emit("page-count",e)},scopedSlots:{default:this.genDefaultScopedSlot}})}});
//# sourceMappingURL=/sm/8413a919b9e45dc9699c834dfec322497da9be49e77552fb5e579541ae5e4e6f.map