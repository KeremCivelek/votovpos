/**
 * Minified by jsDelivr using Terser v5.13.1.
 * Original file: /npm/vuetify@2.6.6/lib/components/VCombobox/VCombobox.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import"../../../src/components/VAutocomplete/VAutocomplete.sass";import VSelect from"../VSelect/VSelect";import VAutocomplete from"../VAutocomplete/VAutocomplete";import{keyCodes}from"../../util/helpers";export default VAutocomplete.extend({name:"v-combobox",props:{delimiters:{type:Array,default:()=>[]},returnObject:{type:Boolean,default:!0}},data:()=>({editingIndex:-1}),computed:{computedCounterValue(){return this.multiple?this.selectedItems.length:(this.internalSearch||"").toString().length},hasSlot(){return VSelect.options.computed.hasSlot.call(this)||this.multiple},isAnyValueAllowed:()=>!0,menuCanShow(){return!!this.isFocused&&(this.hasDisplayedItems||!!this.$slots["no-data"]&&!this.hideNoData)},searchIsDirty(){return null!=this.internalSearch}},methods:{onInternalSearchChanged(e){if(e&&this.multiple&&this.delimiters.length){const t=this.delimiters.find((t=>e.endsWith(t)));null!=t&&(this.internalSearch=e.slice(0,e.length-t.length),this.updateTags())}this.updateMenuDimensions()},genInput(){const e=VAutocomplete.options.methods.genInput.call(this);return delete e.data.attrs.name,e.data.on.paste=this.onPaste,e},genChipSelection(e,t){const i=VSelect.options.methods.genChipSelection.call(this,e,t);return this.multiple&&(i.componentOptions.listeners={...i.componentOptions.listeners,dblclick:()=>{this.editingIndex=t,this.internalSearch=this.getText(e),this.selectedIndex=-1}}),i},onChipInput(e){VSelect.options.methods.onChipInput.call(this,e),this.editingIndex=-1},onEnterDown(e){e.preventDefault(),this.getMenuIndex()>-1||this.$nextTick(this.updateSelf)},onKeyDown(e){const t=e.keyCode;!e.ctrlKey&&[keyCodes.home,keyCodes.end].includes(t)||VSelect.options.methods.onKeyDown.call(this,e),this.multiple&&t===keyCodes.left&&0===this.$refs.input.selectionStart?this.updateSelf():t===keyCodes.enter&&this.onEnterDown(e),this.changeSelectedIndex(t)},onTabDown(e){if(this.multiple&&this.internalSearch&&-1===this.getMenuIndex())return e.preventDefault(),e.stopPropagation(),this.updateTags();VAutocomplete.options.methods.onTabDown.call(this,e)},selectItem(e){this.editingIndex>-1?this.updateEditing():(VAutocomplete.options.methods.selectItem.call(this,e),this.internalSearch&&this.multiple&&this.getText(e).toLocaleLowerCase().includes(this.internalSearch.toLocaleLowerCase())&&(this.internalSearch=null))},setSelectedItems(){null==this.internalValue||""===this.internalValue?this.selectedItems=[]:this.selectedItems=this.multiple?this.internalValue:[this.internalValue]},setValue(e){VSelect.options.methods.setValue.call(this,void 0===e?this.internalSearch:e)},updateEditing(){const e=this.internalValue.slice(),t=this.selectedItems.findIndex((e=>this.getText(e)===this.internalSearch));if(t>-1){const i="object"==typeof e[t]?Object.assign({},e[t]):e[t];e.splice(t,1),e.push(i)}else e[this.editingIndex]=this.internalSearch;this.setValue(e),this.editingIndex=-1,this.internalSearch=null},updateCombobox(){if(!this.searchIsDirty)return;this.internalSearch!==this.getText(this.internalValue)&&this.setValue();(Boolean(this.$scopedSlots.selection)||this.hasChips)&&(this.internalSearch=null)},updateSelf(){this.multiple?this.updateTags():this.updateCombobox()},updateTags(){const e=this.getMenuIndex();if(e<0&&!this.searchIsDirty||!this.internalSearch)return;if(this.editingIndex>-1)return this.updateEditing();const t=this.selectedItems.findIndex((e=>this.internalSearch===this.getText(e))),i=t>-1&&"object"==typeof this.selectedItems[t]?Object.assign({},this.selectedItems[t]):this.internalSearch;if(t>-1){const e=this.internalValue.slice();e.splice(t,1),this.setValue(e)}if(e>-1)return this.internalSearch=null;this.selectItem(i),this.internalSearch=null},onPaste(e){var t;if(!this.multiple||this.searchIsDirty)return;const i=null==(t=e.clipboardData)?void 0:t.getData("text/vnd.vuetify.autocomplete.item+plain");i&&-1===this.findExistingIndex(i)&&(e.preventDefault(),VSelect.options.methods.selectItem.call(this,i))},clearableCallback(){this.editingIndex=-1,VAutocomplete.options.methods.clearableCallback.call(this)}}});
//# sourceMappingURL=/sm/6021a860e98c1b46f4dafba63e4be33e04b5641d5b2a03ca80c27d3c647d8c8f.map