/**
 * Minified by jsDelivr using Terser v5.13.1.
 * Original file: /npm/vuetify@2.6.6/lib/mixins/overlayable/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import VOverlay from"../../components/VOverlay";import{keyCodes,addOnceEventListener,addPassiveEventListener,getZIndex,composedPath}from"../../util/helpers";import Vue from"vue";export default Vue.extend().extend({name:"overlayable",props:{hideOverlay:Boolean,overlayColor:String,overlayOpacity:[Number,String]},data:()=>({animationFrame:0,overlay:null}),watch:{hideOverlay(e){this.isActive&&(e?this.removeOverlay():this.genOverlay())}},beforeDestroy(){this.removeOverlay()},methods:{createOverlay(){const e=new VOverlay({propsData:{absolute:this.absolute,value:!1,color:this.overlayColor,opacity:this.overlayOpacity}});e.$mount();const t=this.absolute?this.$el.parentNode:document.querySelector("[data-app]");t&&t.insertBefore(e.$el,t.firstChild),this.overlay=e},genOverlay(){if(this.hideScroll(),!this.hideOverlay)return this.overlay||this.createOverlay(),this.animationFrame=requestAnimationFrame((()=>{this.overlay&&(void 0!==this.activeZIndex?this.overlay.zIndex=String(this.activeZIndex-1):this.$el&&(this.overlay.zIndex=getZIndex(this.$el)),this.overlay.value=!0)})),!0},removeOverlay(e=!0){this.overlay&&(addOnceEventListener(this.overlay.$el,"transitionend",(()=>{this.overlay&&this.overlay.$el&&this.overlay.$el.parentNode&&!this.overlay.value&&!this.isActive&&(this.overlay.$el.parentNode.removeChild(this.overlay.$el),this.overlay.$destroy(),this.overlay=null)})),cancelAnimationFrame(this.animationFrame),this.overlay.value=!1),e&&this.showScroll()},scrollListener(e){if("keydown"===e.type){if(["INPUT","TEXTAREA","SELECT"].includes(e.target.tagName)||e.target.isContentEditable)return;const t=[keyCodes.up,keyCodes.pageup],o=[keyCodes.down,keyCodes.pagedown];if(t.includes(e.keyCode))e.deltaY=-1;else{if(!o.includes(e.keyCode))return;e.deltaY=1}}(e.target===this.overlay||"keydown"!==e.type&&e.target===document.body||this.checkPath(e))&&e.preventDefault()},hasScrollbar(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return(["auto","scroll"].includes(t.overflowY)||"SELECT"===e.tagName)&&e.scrollHeight>e.clientHeight||["auto","scroll"].includes(t.overflowX)&&e.scrollWidth>e.clientWidth},shouldScroll(e,t){if(e.hasAttribute("data-app"))return!1;const o=t.shiftKey||t.deltaX?"x":"y",r="y"===o?t.deltaY:t.deltaX||t.deltaY;let l,i;"y"===o?(l=0===e.scrollTop,i=e.scrollTop+e.clientHeight===e.scrollHeight):(l=0===e.scrollLeft,i=e.scrollLeft+e.clientWidth===e.scrollWidth);return!(l||!(r<0))||(!(i||!(r>0))||!(!l&&!i)&&this.shouldScroll(e.parentNode,t))},isInside(e,t){return e===t||null!==e&&e!==document.body&&this.isInside(e.parentNode,t)},checkPath(e){const t=composedPath(e);if("keydown"===e.type&&t[0]===document.body){const t=this.$refs.dialog,o=window.getSelection().anchorNode;return!(t&&this.hasScrollbar(t)&&this.isInside(o,t))||!this.shouldScroll(t,e)}for(let o=0;o<t.length;o++){const r=t[o];if(r===document)return!0;if(r===document.documentElement)return!0;if(r===this.$refs.content)return!0;if(this.hasScrollbar(r))return!this.shouldScroll(r,e)}return!0},hideScroll(){this.$vuetify.breakpoint.smAndDown?document.documentElement.classList.add("overflow-y-hidden"):(addPassiveEventListener(window,"wheel",this.scrollListener,{passive:!1}),window.addEventListener("keydown",this.scrollListener))},showScroll(){document.documentElement.classList.remove("overflow-y-hidden"),window.removeEventListener("wheel",this.scrollListener),window.removeEventListener("keydown",this.scrollListener)}}});
//# sourceMappingURL=/sm/df7df56f37a6ff17c7fd6dad785af829fe0e1208c309d917cbcecda81b2304d2.map