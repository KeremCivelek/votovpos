/**
 * Minified by jsDelivr using Terser v5.13.1.
 * Original file: /npm/vuetify@2.6.6/es5/components/VCalendar/modes/stack.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stack=void 0;var _common=require("./common"),_timestamp=require("../util/timestamp");function _slicedToArray(e,r){return _arrayWithHoles(e)||_iterableToArrayLimit(e,r)||_unsupportedIterableToArray(e,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return t}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,r){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=_unsupportedIterableToArray(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(l)throw i}}}}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var FULL_WIDTH=100,DEFAULT_OFFSET=5,WIDTH_MULTIPLIER=1.7,stack=function(e,r,t){var n=(0,_common.getOverlapGroupHandler)(r);return function(e,r,a,i){if(!a)return n.getVisuals(e,r,a,i);var o,l=(0,_timestamp.getTimestampIdentifier)(e),u=(0,_common.getVisuals)(r,l),s=_createForOfIteratorHelper(getGroups(u,l));try{for(s.s();!(o=s.n()).done;){var d,c=o.value,f=[],v=_createForOfIteratorHelper(c.visuals);try{for(v.s();!(d=v.n()).done;){var p=getNode(d.value,l),m=getNextIndex(p,f);if(!1===m){var h=getParent(p,f);h&&(p.parent=h,p.sibling=(0,_common.hasOverlap)(p.start,p.end,h.start,addTime(h.start,t)),p.index=h.index+1,h.children.push(p))}else{var y=_slicedToArray(getOverlappingRange(p,f,m-1,m-1),1)[0],g=getOverlappingRange(p,f,m+1,m+f.length,!0);p.children=g,p.index=m,y&&(p.parent=y,p.sibling=(0,_common.hasOverlap)(p.start,p.end,y.start,addTime(y.start,t)),y.children.push(p));var _,I=_createForOfIteratorHelper(g);try{for(I.s();!(_=I.n()).done;){var x=_.value;x.parent===y&&(x.parent=p),x.index-p.index<=1&&p.sibling&&(0,_common.hasOverlap)(p.start,addTime(p.start,t),x.start,x.end)&&(x.sibling=!0)}}catch(e){I.e(e)}finally{I.f()}}f.push(p)}}catch(e){v.e(e)}finally{v.f()}calculateBounds(f,t)}}catch(e){s.e(e)}finally{s.f()}return u.sort((function(e,r){return e.left-r.left||e.event.startTimestampIdentifier-r.event.startTimestampIdentifier})),u}};function calculateBounds(e,r){var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=a.visual,o=a.parent,l=getMaxChildIndex(a)+1,u=o?o.visual.left:0,s=FULL_WIDTH-u,d=Math.min(DEFAULT_OFFSET,FULL_WIDTH/l),c=getColumnWidthMultiplier(a,e),f=s/(l-a.index+1),v=s/(l-a.index+(a.sibling?1:0))*c;o&&(i.left=a.sibling?u+f:u+d),i.width=hasFullWidth(a,e,r)?FULL_WIDTH-i.left:Math.min(FULL_WIDTH-i.left,v*WIDTH_MULTIPLIER)}}catch(e){n.e(e)}finally{n.f()}}function getColumnWidthMultiplier(e,r){if(!e.children.length)return 1;var t=e.index+r.length;return e.children.reduce((function(e,r){return Math.min(e,r.index)}),t)-e.index}function getOverlappingIndices(e,r){var t,n=[],a=_createForOfIteratorHelper(r);try{for(a.s();!(t=a.n()).done;){var i=t.value;(0,_common.hasOverlap)(e.start,e.end,i.start,i.end)&&n.push(i.index)}}catch(e){a.e(e)}finally{a.f()}return n}function getNextIndex(e,r){var t=getOverlappingIndices(e,r);t.sort();for(var n=0;n<t.length;n++)if(n<t[n])return n;return!1}function getOverlappingRange(e,r,t,n){var a,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=[],l=_createForOfIteratorHelper(r);try{for(l.s();!(a=l.n()).done;){var u=a.value;u.index>=t&&u.index<=n&&(0,_common.hasOverlap)(e.start,e.end,u.start,u.end)&&o.push(u)}}catch(e){l.e(e)}finally{l.f()}if(i&&o.length>0){var s=o.reduce((function(e,r){return Math.min(e,r.index)}),o[0].index);return o.filter((function(e){return e.index===s}))}return o}function getParent(e,r){var t,n=null,a=_createForOfIteratorHelper(r);try{for(a.s();!(t=a.n()).done;){var i=t.value;(0,_common.hasOverlap)(e.start,e.end,i.start,i.end)&&(null===n||i.index>n.index)&&(n=i)}}catch(e){a.e(e)}finally{a.f()}return n}function hasFullWidth(e,r,t){var n,a=_createForOfIteratorHelper(r);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i!==e&&i.index>e.index&&(0,_common.hasOverlap)(e.start,addTime(e.start,t),i.start,i.end))return!1}}catch(e){a.e(e)}finally{a.f()}return!0}function getGroups(e,r){var t,n=[],a=_createForOfIteratorHelper(e);try{for(a.s();!(t=a.n()).done;){var i,o=t.value,l=_slicedToArray((0,_common.getNormalizedRange)(o.event,r),2),u=l[0],s=l[1],d=!1,c=_createForOfIteratorHelper(n);try{for(c.s();!(i=c.n()).done;){var f=i.value;if((0,_common.hasOverlap)(u,s,f.start,f.end)){f.visuals.push(o),f.end=Math.max(f.end,s),d=!0;break}}}catch(e){c.e(e)}finally{c.f()}d||n.push({start:u,end:s,visuals:[o]})}}catch(e){a.e(e)}finally{a.f()}return n}function getNode(e,r){var t=_slicedToArray((0,_common.getNormalizedRange)(e.event,r),2);return{parent:null,sibling:!0,index:0,visual:e,start:t[0],end:t[1],children:[]}}function getMaxChildIndex(e){var r,t=e.index,n=_createForOfIteratorHelper(e.children);try{for(n.s();!(r=n.n()).done;){var a=getMaxChildIndex(r.value);a>t&&(t=a)}}catch(e){n.e(e)}finally{n.f()}return t}function addTime(e,r){var t=e%100,n=t+r;return e-t+100*Math.floor(n/60)+n%60}exports.stack=stack;
//# sourceMappingURL=/sm/b00a06facde23aa632830609fc855b47f4773966e2943617b4a86402d72f5f15.map