/**
 * Minified by jsDelivr using Terser v5.13.1.
 * Original file: /npm/vuetify@2.6.6/es5/components/VCalendar/mixins/calendar-with-events.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("../../../../src/components/VCalendar/mixins/calendar-with-events.sass");var _ripple=_interopRequireDefault(require("../../../directives/ripple")),_calendarBase=_interopRequireDefault(require("./calendar-base")),_helpers=require("../../../util/helpers"),_props=_interopRequireDefault(require("../util/props")),_modes=require("../modes"),_timestamp=require("../util/timestamp"),_events=require("../util/events");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var WIDTH_FULL=100,WIDTH_START=95,MINUTES_IN_DAY=1440,_default=_calendarBase.default.extend({name:"calendar-with-events",directives:{ripple:_ripple.default},props:_objectSpread(_objectSpread(_objectSpread({},_props.default.events),_props.default.calendar),_props.default.category),computed:{noEvents:function(){return 0===this.events.length},parsedEvents:function(){return this.events.map(this.parseEvent)},parsedEventOverlapThreshold:function(){return parseInt(this.eventOverlapThreshold)},eventTimedFunction:function(){var e=this;return"function"==typeof this.eventTimed?this.eventTimed:function(t){return!!t[e.eventTimed]}},eventCategoryFunction:function(){var e=this;return"function"==typeof this.eventCategory?this.eventCategory:function(t){return t[e.eventCategory]}},eventTextColorFunction:function(){var e=this;return"function"==typeof this.eventTextColor?this.eventTextColor:function(){return e.eventTextColor}},eventNameFunction:function(){var e=this;return"function"==typeof this.eventName?this.eventName:function(t,n){return(0,_helpers.escapeHTML)(t.input[e.eventName]||"")}},eventModeFunction:function(){return"function"==typeof this.eventOverlapMode?this.eventOverlapMode:_modes.CalendarEventOverlapModes[this.eventOverlapMode]},eventWeekdays:function(){return this.parsedWeekdays},categoryMode:function(){return"category"===this.type}},methods:{eventColorFunction:function(e){return"function"==typeof this.eventColor?this.eventColor(e):e.color||this.eventColor},parseEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,_events.parseEvent)(e,t,this.eventStart,this.eventEnd,this.eventTimedFunction(e),!!this.categoryMode&&this.eventCategoryFunction(e))},formatTime:function(e,t){return this.getFormatter({timeZone:"UTC",hour:"numeric",minute:e.minute>0?"numeric":void 0})(e,!0)},updateEventVisibility:function(){if(!this.noEvents&&this.eventMore){var e=this.eventHeight,t=this.getEventsMap();for(var n in t){var r=t[n],i=r.parent,o=r.events,a=r.more;if(!a)break;for(var s=i.getBoundingClientRect(),u=o.length-1,v=o.map((function(e){return{event:e,bottom:e.getBoundingClientRect().bottom}})).sort((function(e,t){return e.bottom-t.bottom})),c=0,d=0;d<=u;d++){var p=v[d].bottom;(d===u?p>s.bottom:p+e>s.bottom)&&(v[d].event.style.display="none",c++)}c?(a.style.display="",a.innerHTML=this.$vuetify.lang.t(this.eventMoreText,c)):a.style.display="none"}}},getEventsMap:function(){var e={},t=this.$refs.events;return t&&t.forEach?(t.forEach((function(t){var n=t.getAttribute("data-date");t.parentElement&&n&&(n in e||(e[n]={parent:t.parentElement,more:null,events:[]}),t.getAttribute("data-more")?e[n].more=t:(e[n].events.push(t),t.style.display=""))})),e):e},genDayEvent:function(e,t){var n=e.event,r=this.eventHeight,i=this.eventMarginBottom,o=(0,_timestamp.getDayIdentifier)(t),a=t.week,s=o===n.startIdentifier,u=o===n.endIdentifier,v=WIDTH_START;if(!this.categoryMode)for(var c=t.index+1;c<a.length;c++){var d=(0,_timestamp.getDayIdentifier)(a[c]);if(!(n.endIdentifier>=d)){u=!0;break}v+=WIDTH_FULL,u=u||d===n.endIdentifier}var p={eventParsed:n,day:t,start:s,end:u,timed:!1};return this.genEvent(n,p,!1,{staticClass:"v-event",class:{"v-event-start":s,"v-event-end":u},style:{height:"".concat(r,"px"),width:"".concat(v,"%"),"margin-bottom":"".concat(i,"px")},attrs:{"data-date":t.date},key:n.index,ref:"events",refInFor:!0})},genTimedEvent:function(e,t){var n=e.event,r=e.left,i=e.width;if(t.timeDelta(n.end)<0||t.timeDelta(n.start)>=1||(0,_events.isEventHiddenOn)(n,t))return!1;var o=(0,_timestamp.getDayIdentifier)(t),a=n.startIdentifier>=o,s=n.endIdentifier>o,u=a?t.timeToY(n.start):0,v=s?t.timeToY(MINUTES_IN_DAY):t.timeToY(n.end),c=Math.max(this.eventHeight,v-u),d={eventParsed:n,day:t,start:a,end:s,timed:!0};return this.genEvent(n,d,!0,{staticClass:"v-event-timed",style:{top:"".concat(u,"px"),height:"".concat(c,"px"),left:"".concat(r,"%"),width:"".concat(i,"%")}})},genEvent:function(e,t,n,r){var i,o=this,a=this.$scopedSlots.event,s=this.eventTextColorFunction(e.input),u=this.eventColorFunction(e.input),v=e.start.hour<12&&e.end.hour>=12,c=(0,_timestamp.diffMinutes)(e.start,e.end)<=this.parsedEventOverlapThreshold,d=this.formatTime,p=function(){return d(e.start,v)+" - "+d(e.end,!0)},l=function(){var t=o.eventNameFunction(e,n);if(e.start.hasTime){var r="v-event-summary";if(n){var i=p(),a=c?", ":"<br>";return'<span class="'.concat(r,'"><strong>').concat(t,"</strong>").concat(a).concat(i,"</span>")}var s=d(e.start,!0);return'<span class="'.concat(r,'"><strong>').concat(s,"</strong> ").concat(t,"</span>")}return t},f=_objectSpread(_objectSpread({},t),{},{event:e.input,outside:t.day.outside,singline:c,overlapsNoon:v,formatTime:d,timeSummary:p,eventSummary:l});return this.$createElement("div",this.setTextColor(s,this.setBackgroundColor(u,_objectSpread({on:this.getDefaultMouseEventHandlers(":event",(function(e){return _objectSpread(_objectSpread({},f),{},{nativeEvent:e})})),directives:[{name:"ripple",value:null==(i=this.eventRipple)||i}]},r))),a?a(f):[this.genName(l)])},genName:function(e){return this.$createElement("div",{staticClass:"pl-1",domProps:{innerHTML:e()}})},genPlaceholder:function(e){var t=this.eventHeight+this.eventMarginBottom;return this.$createElement("div",{style:{height:"".concat(t,"px")},attrs:{"data-date":e.date},ref:"events",refInFor:!0})},genMore:function(e){var t,n=this.eventHeight,r=this.eventMarginBottom;return this.$createElement("div",{staticClass:"v-event-more pl-1",class:{"v-outside":e.outside},attrs:{"data-date":e.date,"data-more":1},directives:[{name:"ripple",value:null==(t=this.eventRipple)||t}],on:this.getDefaultMouseEventHandlers(":more",(function(t){return _objectSpread({nativeEvent:t},e)})),style:{display:"none",height:"".concat(n,"px"),"margin-bottom":"".concat(r,"px")},ref:"events",refInFor:!0})},getVisibleEvents:function(){var e=(0,_timestamp.getDayIdentifier)(this.days[0]),t=(0,_timestamp.getDayIdentifier)(this.days[this.days.length-1]);return this.parsedEvents.filter((function(n){return(0,_events.isEventOverlapping)(n,e,t)}))},isEventForCategory:function(e,t){return!this.categoryMode||"object"===_typeof(t)&&t.categoryName&&t.categoryName===e.category||"string"==typeof e.category&&t===e.category||"string"!=typeof e.category&&null===t},getEventsForDay:function(e){var t=(0,_timestamp.getDayIdentifier)(e),n=this.eventWeekdays[0];return this.parsedEvents.filter((function(r){return(0,_events.isEventStart)(r,e,t,n)}))},getEventsForDayAll:function(e){var t=this,n=(0,_timestamp.getDayIdentifier)(e),r=this.eventWeekdays[0];return this.parsedEvents.filter((function(i){return i.allDay&&(t.categoryMode?(0,_events.isEventOn)(i,n):(0,_events.isEventStart)(i,e,n,r))&&t.isEventForCategory(i,e.category)}))},getEventsForDayTimed:function(e){var t=this,n=(0,_timestamp.getDayIdentifier)(e);return this.parsedEvents.filter((function(r){return!r.allDay&&(0,_events.isEventOn)(r,n)&&t.isEventForCategory(r,e.category)}))},getScopedSlots:function(){var e=this;if(this.noEvents)return _objectSpread({},this.$scopedSlots);var t=this.eventModeFunction(this.parsedEvents,this.eventWeekdays[0],this.parsedEventOverlapThreshold),n=function(e){return!!e},r=function(r,i,o,a){var s=i(r),u=t(r,s,a,e.categoryMode);if(a)return u.map((function(e){return o(e,r)})).filter(n);var v=[];return u.forEach((function(t,n){for(;v.length<t.column;)v.push(e.genPlaceholder(r));var i=o(t,r);i&&v.push(i)})),v},i=this.$scopedSlots,o=i.day,a=i["day-header"],s=i["day-body"];return _objectSpread(_objectSpread({},i),{},{day:function(t){var n=r(t,e.getEventsForDay,e.genDayEvent,!1);if(n&&n.length>0&&e.eventMore&&n.push(e.genMore(t)),o){var i=o(t);i&&(n=n?n.concat(i):i)}return n},"day-header":function(t){var n=r(t,e.getEventsForDayAll,e.genDayEvent,!1);if(a){var i=a(t);i&&(n=n?n.concat(i):i)}return n},"day-body":function(t){var n=r(t,e.getEventsForDayTimed,e.genTimedEvent,!0),i=[e.$createElement("div",{staticClass:"v-event-timed-container"},n)];if(s){var o=s(t);o&&(i=i.concat(o))}return i}})}}});exports.default=_default;
//# sourceMappingURL=/sm/158f248673bdc99be8b9d89ad22c98ad90d49450b1392230e3554506d59c1979.map