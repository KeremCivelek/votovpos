/**
 * Minified by jsDelivr using Terser v5.7.1.
 * Original file: /npm/monaco-editor@0.27.0/esm/vs/language/css/_deps/vscode-css-languageservice/services/cssFolding.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";import{TokenType,Scanner}from"../parser/cssScanner.js";import{SCSSScanner,InterpolationFunction}from"../parser/scssScanner.js";import{LESSScanner}from"../parser/lessScanner.js";export function getFoldingRanges(e,n){return limitFoldingRanges(computeFoldingRanges(e),n)}function computeFoldingRanges(e){function n(n){return e.positionAt(n.offset).line}function t(n){return e.positionAt(n.offset+n.len).line}var r=[],i=[],s=function(){switch(e.languageId){case"scss":return new SCSSScanner;case"less":return new LESSScanner;default:return new Scanner}}();s.ignoreComment=!1,s.setSource(e.getText());for(var a=s.scan(),o=null,c=function(){switch(a.type){case TokenType.CurlyL:case InterpolationFunction:i.push({line:n(a),type:"brace",isStart:!0});break;case TokenType.CurlyR:if(0!==i.length){if(!(p=popPrevStartDelimiterOfType(i,"brace")))break;var c=t(a);"brace"===p.type&&(o&&t(o)!==c&&c--,p.line!==c&&r.push({startLine:p.line,endLine:c,kind:void 0}))}break;case TokenType.Comment:var u=function(e){return"#region"===e?{line:n(a),type:"comment",isStart:!0}:{line:t(a),type:"comment",isStart:!1}},l=function(n){var t=n.text.match(/^\s*\/\*\s*(#region|#endregion)\b\s*(.*?)\s*\*\//);if(t)return u(t[1]);if("scss"===e.languageId||"less"===e.languageId){var r=n.text.match(/^\s*\/\/\s*(#region|#endregion)\b\s*(.*?)\s*/);if(r)return u(r[1])}return null}(a);if(l)if(l.isStart)i.push(l);else{var p;if(!(p=popPrevStartDelimiterOfType(i,"comment")))break;"comment"===p.type&&p.line!==l.line&&r.push({startLine:p.line,endLine:l.line,kind:"region"})}else{var f=function(e,r){var i=n(e),s=t(e);return i!==s?{startLine:i,endLine:s,kind:r}:null}(a,"comment");f&&r.push(f)}}o=a,a=s.scan()};a.type!==TokenType.EOF;)c();return r}function popPrevStartDelimiterOfType(e,n){if(0===e.length)return null;for(var t=e.length-1;t>=0;t--)if(e[t].type===n&&e[t].isStart)return e.splice(t,1)[0];return null}function limitFoldingRanges(e,n){var t=n&&n.rangeLimit||Number.MAX_VALUE,r=e.sort((function(e,n){var t=e.startLine-n.startLine;return 0===t&&(t=e.endLine-n.endLine),t})),i=[],s=-1;return r.forEach((function(e){e.startLine<s&&s<e.endLine||(i.push(e),s=e.endLine)})),i.length<t?i:i.slice(0,t)}
//# sourceMappingURL=/sm/2edf1dc80d30d926ecea8b645d6675db65b7c6baf4ecd337efa1e55170288614.map