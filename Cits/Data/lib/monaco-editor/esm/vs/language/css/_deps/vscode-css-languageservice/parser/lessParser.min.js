/**
 * Minified by jsDelivr using Terser v5.7.1.
 * Original file: /npm/monaco-editor@0.27.0/esm/vs/language/css/_deps/vscode-css-languageservice/parser/lessParser.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();import*as lessScanner from"./lessScanner.js";import{TokenType}from"./cssScanner.js";import*as cssParser from"./cssParser.js";import*as nodes from"./cssNodes.js";import{ParseError}from"./cssErrors.js";var LESSParser=function(e){function t(){return e.call(this,new lessScanner.LESSScanner)||this}return __extends(t,e),t.prototype._parseStylesheetStatement=function(t){return void 0===t&&(t=!1),this.peek(TokenType.AtKeyword)?this._parseVariableDeclaration()||this._parsePlugin()||e.prototype._parseStylesheetAtStatement.call(this,t):this._tryParseMixinDeclaration()||this._tryParseMixinReference()||this._parseFunction()||this._parseRuleset(!0)},t.prototype._parseImport=function(){if(!this.peekKeyword("@import")&&!this.peekKeyword("@import-once"))return null;var e=this.create(nodes.Import);if(this.consumeToken(),this.accept(TokenType.ParenthesisL)){if(!this.accept(TokenType.Ident))return this.finish(e,ParseError.IdentifierExpected,[TokenType.SemiColon]);do{if(!this.accept(TokenType.Comma))break}while(this.accept(TokenType.Ident));if(!this.accept(TokenType.ParenthesisR))return this.finish(e,ParseError.RightParenthesisExpected,[TokenType.SemiColon])}return e.addChild(this._parseURILiteral())||e.addChild(this._parseStringLiteral())?(this.peek(TokenType.SemiColon)||this.peek(TokenType.EOF)||e.setMedialist(this._parseMediaQueryList()),this.finish(e)):this.finish(e,ParseError.URIOrStringExpected,[TokenType.SemiColon])},t.prototype._parsePlugin=function(){if(!this.peekKeyword("@plugin"))return null;var e=this.createNode(nodes.NodeType.Plugin);return this.consumeToken(),e.addChild(this._parseStringLiteral())?this.accept(TokenType.SemiColon)?this.finish(e):this.finish(e,ParseError.SemiColonExpected):this.finish(e,ParseError.StringLiteralExpected)},t.prototype._parseMediaQuery=function(t){var r=e.prototype._parseMediaQuery.call(this,t);if(!r){var i=this.create(nodes.MediaQuery);return i.addChild(this._parseVariable())?this.finish(i):null}return r},t.prototype._parseMediaDeclaration=function(e){return void 0===e&&(e=!1),this._tryParseRuleset(e)||this._tryToParseDeclaration()||this._tryParseMixinDeclaration()||this._tryParseMixinReference()||this._parseDetachedRuleSetMixin()||this._parseStylesheetStatement(e)},t.prototype._parseMediaFeatureName=function(){return this._parseIdent()||this._parseVariable()},t.prototype._parseVariableDeclaration=function(e){void 0===e&&(e=[]);var t=this.create(nodes.VariableDeclaration),r=this.mark();if(!t.setVariable(this._parseVariable(!0)))return null;if(!this.accept(TokenType.Colon))return this.restoreAtMark(r),null;if(this.prevToken&&(t.colonPosition=this.prevToken.offset),t.setValue(this._parseDetachedRuleSet()))t.needsSemicolon=!1;else if(!t.setValue(this._parseExpr()))return this.finish(t,ParseError.VariableValueExpected,[],e);return t.addChild(this._parsePrio()),this.peek(TokenType.SemiColon)&&(t.semicolonPosition=this.token.offset),this.finish(t)},t.prototype._parseDetachedRuleSet=function(){var e=this.mark();if(this.peekDelim("#")||this.peekDelim(".")){if(this.consumeToken(),this.hasWhitespace()||!this.accept(TokenType.ParenthesisL))return this.restoreAtMark(e),null;var t=this.create(nodes.MixinDeclaration);if(t.getParameters().addChild(this._parseMixinParameter()))for(;(this.accept(TokenType.Comma)||this.accept(TokenType.SemiColon))&&!this.peek(TokenType.ParenthesisR);)t.getParameters().addChild(this._parseMixinParameter())||this.markError(t,ParseError.IdentifierExpected,[],[TokenType.ParenthesisR]);if(!this.accept(TokenType.ParenthesisR))return this.restoreAtMark(e),null}if(!this.peek(TokenType.CurlyL))return null;var r=this.create(nodes.BodyDeclaration);return this._parseBody(r,this._parseDetachedRuleSetBody.bind(this)),this.finish(r)},t.prototype._parseDetachedRuleSetBody=function(){return this._tryParseKeyframeSelector()||this._parseRuleSetDeclaration()},t.prototype._addLookupChildren=function(e){if(!e.addChild(this._parseLookupValue()))return!1;for(var t=!1;this.peek(TokenType.BracketL)&&(t=!0),e.addChild(this._parseLookupValue());)t=!1;return!t},t.prototype._parseLookupValue=function(){var e=this.create(nodes.Node),t=this.mark();return this.accept(TokenType.BracketL)&&((e.addChild(this._parseVariable(!1,!0))||e.addChild(this._parsePropertyIdentifier()))&&this.accept(TokenType.BracketR)||this.accept(TokenType.BracketR))?e:(this.restoreAtMark(t),null)},t.prototype._parseVariable=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var r=!e&&this.peekDelim("$");if(!this.peekDelim("@")&&!r&&!this.peek(TokenType.AtKeyword))return null;for(var i=this.create(nodes.Variable),s=this.mark();this.acceptDelim("@")||!e&&this.acceptDelim("$");)if(this.hasWhitespace())return this.restoreAtMark(s),null;return(this.accept(TokenType.AtKeyword)||this.accept(TokenType.Ident))&&(t||!this.peek(TokenType.BracketL)||this._addLookupChildren(i))?i:(this.restoreAtMark(s),null)},t.prototype._parseTermExpression=function(){return this._parseVariable()||this._parseEscaped()||e.prototype._parseTermExpression.call(this)||this._tryParseMixinReference(!1)},t.prototype._parseEscaped=function(){if(this.peek(TokenType.EscapedJavaScript)||this.peek(TokenType.BadEscapedJavaScript)){var e=this.createNode(nodes.NodeType.EscapedValue);return this.consumeToken(),this.finish(e)}if(this.peekDelim("~")){e=this.createNode(nodes.NodeType.EscapedValue);return this.consumeToken(),this.accept(TokenType.String)||this.accept(TokenType.EscapedJavaScript)?this.finish(e):this.finish(e,ParseError.TermExpected)}return null},t.prototype._parseOperator=function(){var t=this._parseGuardOperator();return t||e.prototype._parseOperator.call(this)},t.prototype._parseGuardOperator=function(){if(this.peekDelim(">")){var e=this.createNode(nodes.NodeType.Operator);return this.consumeToken(),this.acceptDelim("="),e}if(this.peekDelim("=")){e=this.createNode(nodes.NodeType.Operator);return this.consumeToken(),this.acceptDelim("<"),e}if(this.peekDelim("<")){e=this.createNode(nodes.NodeType.Operator);return this.consumeToken(),this.acceptDelim("="),e}return null},t.prototype._parseRuleSetDeclaration=function(){return this.peek(TokenType.AtKeyword)?this._parseKeyframe()||this._parseMedia(!0)||this._parseImport()||this._parseSupports(!0)||this._parseDetachedRuleSetMixin()||this._parseVariableDeclaration()||e.prototype._parseRuleSetDeclarationAtStatement.call(this):this._tryParseMixinDeclaration()||this._tryParseRuleset(!0)||this._tryParseMixinReference()||this._parseFunction()||this._parseExtend()||e.prototype._parseRuleSetDeclaration.call(this)},t.prototype._parseKeyframeIdent=function(){return this._parseIdent([nodes.ReferenceType.Keyframe])||this._parseVariable()},t.prototype._parseKeyframeSelector=function(){return this._parseDetachedRuleSetMixin()||e.prototype._parseKeyframeSelector.call(this)},t.prototype._parseSimpleSelectorBody=function(){return this._parseSelectorCombinator()||e.prototype._parseSimpleSelectorBody.call(this)},t.prototype._parseSelector=function(e){var t=this.create(nodes.Selector),r=!1;for(e&&(r=t.addChild(this._parseCombinator()));t.addChild(this._parseSimpleSelector());){r=!0;var i=this.mark();if(t.addChild(this._parseGuard())&&this.peek(TokenType.CurlyL))break;this.restoreAtMark(i),t.addChild(this._parseCombinator())}return r?this.finish(t):null},t.prototype._parseSelectorCombinator=function(){if(this.peekDelim("&")){var e=this.createNode(nodes.NodeType.SelectorCombinator);for(this.consumeToken();!this.hasWhitespace()&&(this.acceptDelim("-")||this.accept(TokenType.Num)||this.accept(TokenType.Dimension)||e.addChild(this._parseIdent())||this.acceptDelim("&")););return this.finish(e)}return null},t.prototype._parseSelectorIdent=function(){if(!this.peekInterpolatedIdent())return null;var e=this.createNode(nodes.NodeType.SelectorInterpolation);return this._acceptInterpolatedIdent(e)?this.finish(e):null},t.prototype._parsePropertyIdentifier=function(e){void 0===e&&(e=!1);var t=/^[\w-]+/;if(!this.peekInterpolatedIdent()&&!this.peekRegExp(this.token.type,t))return null;var r=this.mark(),i=this.create(nodes.Identifier);i.isCustomProperty=this.acceptDelim("-")&&this.acceptDelim("-");return(e?i.isCustomProperty?i.addChild(this._parseIdent()):i.addChild(this._parseRegexp(t)):i.isCustomProperty?this._acceptInterpolatedIdent(i):this._acceptInterpolatedIdent(i,t))?(e||this.hasWhitespace()||(this.acceptDelim("+"),this.hasWhitespace()||this.acceptIdent("_")),this.finish(i)):(this.restoreAtMark(r),null)},t.prototype.peekInterpolatedIdent=function(){return this.peek(TokenType.Ident)||this.peekDelim("@")||this.peekDelim("$")||this.peekDelim("-")},t.prototype._acceptInterpolatedIdent=function(e,t){for(var r=this,i=!1,s=function(){var e=r.mark();return r.acceptDelim("-")&&(r.hasWhitespace()||r.acceptDelim("-"),r.hasWhitespace())?(r.restoreAtMark(e),null):r._parseInterpolation()},n=t?function(){return r.acceptRegexp(t)}:function(){return r.accept(TokenType.Ident)};(n()||e.addChild(this._parseInterpolation()||this.try(s)))&&(i=!0,!this.hasWhitespace()););return i},t.prototype._parseInterpolation=function(){var e=this.mark();if(this.peekDelim("@")||this.peekDelim("$")){var t=this.createNode(nodes.NodeType.Interpolation);return this.consumeToken(),this.hasWhitespace()||!this.accept(TokenType.CurlyL)?(this.restoreAtMark(e),null):t.addChild(this._parseIdent())?this.accept(TokenType.CurlyR)?this.finish(t):this.finish(t,ParseError.RightCurlyExpected):this.finish(t,ParseError.IdentifierExpected)}return null},t.prototype._tryParseMixinDeclaration=function(){var e=this.mark(),t=this.create(nodes.MixinDeclaration);if(!t.setIdentifier(this._parseMixinDeclarationIdentifier())||!this.accept(TokenType.ParenthesisL))return this.restoreAtMark(e),null;if(t.getParameters().addChild(this._parseMixinParameter()))for(;(this.accept(TokenType.Comma)||this.accept(TokenType.SemiColon))&&!this.peek(TokenType.ParenthesisR);)t.getParameters().addChild(this._parseMixinParameter())||this.markError(t,ParseError.IdentifierExpected,[],[TokenType.ParenthesisR]);return this.accept(TokenType.ParenthesisR)?(t.setGuard(this._parseGuard()),this.peek(TokenType.CurlyL)?this._parseBody(t,this._parseMixInBodyDeclaration.bind(this)):(this.restoreAtMark(e),null)):(this.restoreAtMark(e),null)},t.prototype._parseMixInBodyDeclaration=function(){return this._parseFontFace()||this._parseRuleSetDeclaration()},t.prototype._parseMixinDeclarationIdentifier=function(){var e;if(this.peekDelim("#")||this.peekDelim(".")){if(e=this.create(nodes.Identifier),this.consumeToken(),this.hasWhitespace()||!e.addChild(this._parseIdent()))return null}else{if(!this.peek(TokenType.Hash))return null;e=this.create(nodes.Identifier),this.consumeToken()}return e.referenceTypes=[nodes.ReferenceType.Mixin],this.finish(e)},t.prototype._parsePseudo=function(){if(!this.peek(TokenType.Colon))return null;var t=this.mark(),r=this.create(nodes.ExtendsReference);return this.consumeToken(),this.acceptIdent("extend")?this._completeExtends(r):(this.restoreAtMark(t),e.prototype._parsePseudo.call(this))},t.prototype._parseExtend=function(){if(!this.peekDelim("&"))return null;var e=this.mark(),t=this.create(nodes.ExtendsReference);return this.consumeToken(),!this.hasWhitespace()&&this.accept(TokenType.Colon)&&this.acceptIdent("extend")?this._completeExtends(t):(this.restoreAtMark(e),null)},t.prototype._completeExtends=function(e){if(!this.accept(TokenType.ParenthesisL))return this.finish(e,ParseError.LeftParenthesisExpected);var t=e.getSelectors();if(!t.addChild(this._parseSelector(!0)))return this.finish(e,ParseError.SelectorExpected);for(;this.accept(TokenType.Comma);)if(!t.addChild(this._parseSelector(!0)))return this.finish(e,ParseError.SelectorExpected);return this.accept(TokenType.ParenthesisR)?this.finish(e):this.finish(e,ParseError.RightParenthesisExpected)},t.prototype._parseDetachedRuleSetMixin=function(){if(!this.peek(TokenType.AtKeyword))return null;var e=this.mark(),t=this.create(nodes.MixinReference);return!t.addChild(this._parseVariable(!0))||!this.hasWhitespace()&&this.accept(TokenType.ParenthesisL)?this.accept(TokenType.ParenthesisR)?this.finish(t):this.finish(t,ParseError.RightParenthesisExpected):(this.restoreAtMark(e),null)},t.prototype._tryParseMixinReference=function(e){void 0===e&&(e=!0);for(var t=this.mark(),r=this.create(nodes.MixinReference),i=this._parseMixinDeclarationIdentifier();i;){this.acceptDelim(">");var s=this._parseMixinDeclarationIdentifier();if(!s)break;r.getNamespaces().addChild(i),i=s}if(!r.setIdentifier(i))return this.restoreAtMark(t),null;var n=!1;if(this.accept(TokenType.ParenthesisL)){if(n=!0,r.getArguments().addChild(this._parseMixinArgument()))for(;(this.accept(TokenType.Comma)||this.accept(TokenType.SemiColon))&&!this.peek(TokenType.ParenthesisR);)if(!r.getArguments().addChild(this._parseMixinArgument()))return this.finish(r,ParseError.ExpressionExpected);if(!this.accept(TokenType.ParenthesisR))return this.finish(r,ParseError.RightParenthesisExpected);i.referenceTypes=[nodes.ReferenceType.Mixin]}else i.referenceTypes=[nodes.ReferenceType.Mixin,nodes.ReferenceType.Rule];return this.peek(TokenType.BracketL)?e||this._addLookupChildren(r):r.addChild(this._parsePrio()),n||this.peek(TokenType.SemiColon)||this.peek(TokenType.CurlyR)||this.peek(TokenType.EOF)?this.finish(r):(this.restoreAtMark(t),null)},t.prototype._parseMixinArgument=function(){var e=this.create(nodes.FunctionArgument),t=this.mark(),r=this._parseVariable();return r&&(this.accept(TokenType.Colon)?e.setIdentifier(r):this.restoreAtMark(t)),e.setValue(this._parseDetachedRuleSet()||this._parseExpr(!0))?this.finish(e):(this.restoreAtMark(t),null)},t.prototype._parseMixinParameter=function(){var e=this.create(nodes.FunctionParameter);if(this.peekKeyword("@rest")){var t=this.create(nodes.Node);return this.consumeToken(),this.accept(lessScanner.Ellipsis)?(e.setIdentifier(this.finish(t)),this.finish(e)):this.finish(e,ParseError.DotExpected,[],[TokenType.Comma,TokenType.ParenthesisR])}if(this.peek(lessScanner.Ellipsis)){var r=this.create(nodes.Node);return this.consumeToken(),e.setIdentifier(this.finish(r)),this.finish(e)}var i=!1;return e.setIdentifier(this._parseVariable())&&(this.accept(TokenType.Colon),i=!0),e.setDefaultValue(this._parseDetachedRuleSet()||this._parseExpr(!0))||i?this.finish(e):null},t.prototype._parseGuard=function(){if(!this.peekIdent("when"))return null;var e=this.create(nodes.LessGuard);if(this.consumeToken(),e.isNegated=this.acceptIdent("not"),!e.getConditions().addChild(this._parseGuardCondition()))return this.finish(e,ParseError.ConditionExpected);for(;this.acceptIdent("and")||this.accept(TokenType.Comma);)if(!e.getConditions().addChild(this._parseGuardCondition()))return this.finish(e,ParseError.ConditionExpected);return this.finish(e)},t.prototype._parseGuardCondition=function(){if(!this.peek(TokenType.ParenthesisL))return null;var e=this.create(nodes.GuardCondition);return this.consumeToken(),e.addChild(this._parseExpr()),this.accept(TokenType.ParenthesisR)?this.finish(e):this.finish(e,ParseError.RightParenthesisExpected)},t.prototype._parseFunction=function(){var e=this.mark(),t=this.create(nodes.Function);if(!t.setIdentifier(this._parseFunctionIdentifier()))return null;if(this.hasWhitespace()||!this.accept(TokenType.ParenthesisL))return this.restoreAtMark(e),null;if(t.getArguments().addChild(this._parseMixinArgument()))for(;(this.accept(TokenType.Comma)||this.accept(TokenType.SemiColon))&&!this.peek(TokenType.ParenthesisR);)if(!t.getArguments().addChild(this._parseMixinArgument()))return this.finish(t,ParseError.ExpressionExpected);return this.accept(TokenType.ParenthesisR)?this.finish(t):this.finish(t,ParseError.RightParenthesisExpected)},t.prototype._parseFunctionIdentifier=function(){if(this.peekDelim("%")){var t=this.create(nodes.Identifier);return t.referenceTypes=[nodes.ReferenceType.Function],this.consumeToken(),this.finish(t)}return e.prototype._parseFunctionIdentifier.call(this)},t.prototype._parseURLArgument=function(){var t=this.mark(),r=e.prototype._parseURLArgument.call(this);if(!r||!this.peek(TokenType.ParenthesisR)){this.restoreAtMark(t);var i=this.create(nodes.Node);return i.addChild(this._parseBinaryExpr()),this.finish(i)}return r},t}(cssParser.Parser);export{LESSParser};
//# sourceMappingURL=/sm/51a1160a9f59bc89f0555e7f59044b3cfd97203cb8412916a9e827988311256f.map