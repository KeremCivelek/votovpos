/**
 * Minified by jsDelivr using Terser v5.7.1.
 * Original file: /npm/monaco-editor@0.27.0/esm/vs/language/css/_deps/vscode-css-languageservice/parser/cssSymbolScope.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();import*as nodes from"./cssNodes.js";import{findFirst}from"../utils/arrays.js";var Scope=function(){function e(e,t){this.offset=e,this.length=t,this.symbols=[],this.parent=null,this.children=[]}return e.prototype.addChild=function(e){this.children.push(e),e.setParent(this)},e.prototype.setParent=function(e){this.parent=e},e.prototype.findScope=function(e,t){return void 0===t&&(t=0),this.offset<=e&&this.offset+this.length>e+t||this.offset===e&&this.length===t?this.findInScope(e,t):null},e.prototype.findInScope=function(e,t){void 0===t&&(t=0);var n=e+t,o=findFirst(this.children,(function(e){return e.offset>n}));if(0===o)return this;var r=this.children[o-1];return r.offset<=e&&r.offset+r.length>=e+t?r.findInScope(e,t):this},e.prototype.addSymbol=function(e){this.symbols.push(e)},e.prototype.getSymbol=function(e,t){for(var n=0;n<this.symbols.length;n++){var o=this.symbols[n];if(o.name===e&&o.type===t)return o}return null},e.prototype.getSymbols=function(){return this.symbols},e}();export{Scope};var GlobalScope=function(e){function t(){return e.call(this,0,Number.MAX_VALUE)||this}return __extends(t,e),t}(Scope);export{GlobalScope};var Symbol=function(e,t,n,o){this.name=e,this.value=t,this.node=n,this.type=o};export{Symbol};var ScopeBuilder=function(){function e(e){this.scope=e}return e.prototype.addSymbol=function(e,t,n,o){if(-1!==e.offset){var r=this.scope.findScope(e.offset,e.length);r&&r.addSymbol(new Symbol(t,n,e,o))}},e.prototype.addScope=function(e){if(-1!==e.offset){var t=this.scope.findScope(e.offset,e.length);if(t&&(t.offset!==e.offset||t.length!==e.length)){var n=new Scope(e.offset,e.length);return t.addChild(n),n}return t}return null},e.prototype.addSymbolToChildScope=function(e,t,n,o,r){if(e&&-1!==e.offset){var i=this.addScope(e);i&&i.addSymbol(new Symbol(n,o,t,r))}},e.prototype.visitNode=function(e){switch(e.type){case nodes.NodeType.Keyframe:return this.addSymbol(e,e.getName(),void 0,nodes.ReferenceType.Keyframe),!0;case nodes.NodeType.CustomPropertyDeclaration:return this.visitCustomPropertyDeclarationNode(e);case nodes.NodeType.VariableDeclaration:return this.visitVariableDeclarationNode(e);case nodes.NodeType.Ruleset:return this.visitRuleSet(e);case nodes.NodeType.MixinDeclaration:return this.addSymbol(e,e.getName(),void 0,nodes.ReferenceType.Mixin),!0;case nodes.NodeType.FunctionDeclaration:return this.addSymbol(e,e.getName(),void 0,nodes.ReferenceType.Function),!0;case nodes.NodeType.FunctionParameter:return this.visitFunctionParameterNode(e);case nodes.NodeType.Declarations:return this.addScope(e),!0;case nodes.NodeType.For:var t=e,n=t.getDeclarations();return n&&t.variable&&this.addSymbolToChildScope(n,t.variable,t.variable.getName(),void 0,nodes.ReferenceType.Variable),!0;case nodes.NodeType.Each:var o=e,r=o.getDeclarations();if(r)for(var i=0,a=o.getVariables().getChildren();i<a.length;i++){var s=a[i];this.addSymbolToChildScope(r,s,s.getName(),void 0,nodes.ReferenceType.Variable)}return!0}return!0},e.prototype.visitRuleSet=function(e){var t=this.scope.findScope(e.offset,e.length);if(t)for(var n=0,o=e.getSelectors().getChildren();n<o.length;n++){var r=o[n];r instanceof nodes.Selector&&1===r.getChildren().length&&t.addSymbol(new Symbol(r.getChild(0).getText(),void 0,r,nodes.ReferenceType.Rule))}return!0},e.prototype.visitVariableDeclarationNode=function(e){var t=e.getValue()?e.getValue().getText():void 0;return this.addSymbol(e,e.getName(),t,nodes.ReferenceType.Variable),!0},e.prototype.visitFunctionParameterNode=function(e){var t=e.getParent().getDeclarations();if(t){var n=e.getDefaultValue(),o=n?n.getText():void 0;this.addSymbolToChildScope(t,e,e.getName(),o,nodes.ReferenceType.Variable)}return!0},e.prototype.visitCustomPropertyDeclarationNode=function(e){var t=e.getValue()?e.getValue().getText():"";return this.addCSSVariable(e.getProperty(),e.getProperty().getName(),t,nodes.ReferenceType.Variable),!0},e.prototype.addCSSVariable=function(e,t,n,o){-1!==e.offset&&this.scope.addSymbol(new Symbol(t,n,e,o))},e}();export{ScopeBuilder};var Symbols=function(){function e(e){this.global=new GlobalScope,e.acceptVisitor(new ScopeBuilder(this.global))}return e.prototype.findSymbolsAtOffset=function(e,t){for(var n=this.global.findScope(e,0),o=[],r={};n;){for(var i=n.getSymbols(),a=0;a<i.length;a++){var s=i[a];s.type!==t||r[s.name]||(o.push(s),r[s.name]=!0)}n=n.parent}return o},e.prototype.internalFindSymbol=function(e,t){var n=e;if(e.parent instanceof nodes.FunctionParameter&&e.parent.getParent()instanceof nodes.BodyDeclaration&&(n=e.parent.getParent().getDeclarations()),e.parent instanceof nodes.FunctionArgument&&e.parent.getParent()instanceof nodes.Function){var o=e.parent.getParent().getIdentifier();if(o){var r=this.internalFindSymbol(o,[nodes.ReferenceType.Function]);r&&(n=r.node.getDeclarations())}}if(!n)return null;for(var i=e.getText(),a=this.global.findScope(n.offset,n.length);a;){for(var s=0;s<t.length;s++){var l=t[s],f=a.getSymbol(i,l);if(f)return f}a=a.parent}return null},e.prototype.evaluateReferenceTypes=function(e){if(e instanceof nodes.Identifier){var t=e.referenceTypes;if(t)return t;if(e.isCustomProperty)return[nodes.ReferenceType.Variable];var n=nodes.getParentDeclaration(e);if(n){var o=n.getNonPrefixedPropertyName();if(("animation"===o||"animation-name"===o)&&n.getValue()&&n.getValue().offset===e.offset)return[nodes.ReferenceType.Keyframe]}}else if(e instanceof nodes.Variable)return[nodes.ReferenceType.Variable];return e.findAParent(nodes.NodeType.Selector,nodes.NodeType.ExtendsReference)?[nodes.ReferenceType.Rule]:null},e.prototype.findSymbolFromNode=function(e){if(!e)return null;for(;e.type===nodes.NodeType.Interpolation;)e=e.getParent();var t=this.evaluateReferenceTypes(e);return t?this.internalFindSymbol(e,t):null},e.prototype.matchesSymbol=function(e,t){if(!e)return!1;for(;e.type===nodes.NodeType.Interpolation;)e=e.getParent();if(!e.matches(t.name))return!1;var n=this.evaluateReferenceTypes(e);return!(!n||-1===n.indexOf(t.type))&&this.internalFindSymbol(e,n)===t},e.prototype.findSymbol=function(e,t,n){for(var o=this.global.findScope(n);o;){var r=o.getSymbol(e,t);if(r)return r;o=o.parent}return null},e}();export{Symbols};
//# sourceMappingURL=/sm/01a67a74946498652f44d07ff3ebb680c8d14e57619251fbc0868410fc2a2768.map