/**
 * Minified by jsDelivr using Terser v5.7.1.
 * Original file: /npm/monaco-editor@0.27.0/esm/vs/language/css/_deps/vscode-css-languageservice/services/selectorPrinting.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();import*as nodes from"../parser/cssNodes.js";import{Scanner}from"../parser/cssScanner.js";import*as nls from"./../../../fillers/vscode-nls.js";var localize=nls.loadMessageBundle(),Element=function(){function e(){this.parent=null,this.children=null,this.attributes=null}return e.prototype.findAttribute=function(e){if(this.attributes)for(var t=0,n=this.attributes;t<n.length;t++){var r=n[t];if(r.name===e)return r.value}return null},e.prototype.addChild=function(t){t instanceof e&&(t.parent=this),this.children||(this.children=[]),this.children.push(t)},e.prototype.append=function(e){if(this.attributes){var t=this.attributes[this.attributes.length-1];t.value=t.value+e}},e.prototype.prepend=function(e){if(this.attributes){var t=this.attributes[0];t.value=e+t.value}},e.prototype.findRoot=function(){for(var e=this;e.parent&&!(e.parent instanceof RootElement);)e=e.parent;return e},e.prototype.removeChild=function(e){if(this.children){var t=this.children.indexOf(e);if(-1!==t)return this.children.splice(t,1),!0}return!1},e.prototype.addAttr=function(e,t){this.attributes||(this.attributes=[]);for(var n=0,r=this.attributes;n<r.length;n++){var i=r[n];if(i.name===e)return void(i.value+=" "+t)}this.attributes.push({name:e,value:t})},e.prototype.clone=function(t){void 0===t&&(t=!0);var n=new e;if(this.attributes){n.attributes=[];for(var r=0,i=this.attributes;r<i.length;r++){var o=i[r];n.addAttr(o.name,o.value)}}if(t&&this.children){n.children=[];for(var s=0;s<this.children.length;s++)n.addChild(this.children[s].clone())}return n},e.prototype.cloneWithParent=function(){var e=this.clone(!1);!this.parent||this.parent instanceof RootElement||this.parent.cloneWithParent().addChild(e);return e},e}();export{Element};var RootElement=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(Element);export{RootElement};var LabelElement=function(e){function t(t){var n=e.call(this)||this;return n.addAttr("name",t),n}return __extends(t,e),t}(Element);export{LabelElement};var quotes,MarkedStringPrinter=function(){function e(e){this.quote=e,this.result=[]}return e.prototype.print=function(e){return this.result=[],e instanceof RootElement?e.children&&this.doPrint(e.children,0):this.doPrint([e],0),[{language:"html",value:this.result.join("\n")}]},e.prototype.doPrint=function(e,t){for(var n=0,r=e;n<r.length;n++){var i=r[n];this.doPrintElement(i,t),i.children&&this.doPrint(i.children,t+1)}},e.prototype.writeLine=function(e,t){var n=new Array(e+1).join("  ");this.result.push(n+t)},e.prototype.doPrintElement=function(e,t){var n=e.findAttribute("name");if(e instanceof LabelElement||"…"===n)this.writeLine(t,n);else{var r=["<"];if(n?r.push(n):r.push("element"),e.attributes)for(var i=0,o=e.attributes;i<o.length;i++){var s=o[i];if("name"!==s.name){r.push(" "),r.push(s.name);var a=s.value;a&&(r.push("="),r.push(quotes.ensure(a,this.quote)))}}r.push(">"),this.writeLine(t,r.join(""))}},e}();!function(e){function t(e){var t=e.match(/^['"](.*)["']$/);return t?t[1]:e}e.ensure=function(e,n){return n+t(e)+n},e.remove=t}(quotes||(quotes={}));var Specificity=function(){this.id=0,this.attr=0,this.tag=0};export function toElement(e,t){for(var n=new Element,r=0,i=e.getChildren();r<i.length;r++){var o=i[r];switch(o.type){case nodes.NodeType.SelectorCombinator:if(t){var s=o.getText().split("&");if(1===s.length){n.addAttr("name",s[0]);break}if(n=t.cloneWithParent(),s[0])n.findRoot().prepend(s[0]);for(var a=1;a<s.length;a++){if(a>1){var l=t.cloneWithParent();n.addChild(l.findRoot()),n=l}n.append(s[a])}}break;case nodes.NodeType.SelectorPlaceholder:if(o.matches("@at-root"))return n;case nodes.NodeType.ElementNameSelector:var c=o.getText();n.addAttr("name","*"===c?"element":unescape(c));break;case nodes.NodeType.ClassSelector:n.addAttr("class",unescape(o.getText().substring(1)));break;case nodes.NodeType.IdentifierSelector:n.addAttr("id",unescape(o.getText().substring(1)));break;case nodes.NodeType.MixinDeclaration:n.addAttr("class",o.getName());break;case nodes.NodeType.PseudoSelector:n.addAttr(unescape(o.getText()),"");break;case nodes.NodeType.AttributeSelector:var u=o,d=u.getIdentifier();if(d){var p=u.getValue(),h=u.getOperator(),f=void 0;if(p&&h)switch(unescape(h.getText())){case"|=":f=quotes.remove(unescape(p.getText()))+"-…";break;case"^=":f=quotes.remove(unescape(p.getText()))+"…";break;case"$=":f="…"+quotes.remove(unescape(p.getText()));break;case"~=":f=" … "+quotes.remove(unescape(p.getText()))+" … ";break;case"*=":f="…"+quotes.remove(unescape(p.getText()))+"…";break;default:f=quotes.remove(unescape(p.getText()))}n.addAttr(unescape(d.getText()),f)}}}return n}function unescape(e){var t=new Scanner;t.setSource(e);var n=t.scanUnquotedString();return n?n.text:e}var SelectorPrinting=function(){function e(e){this.cssDataManager=e}return e.prototype.selectorToMarkedString=function(e){var t=selectorToElement(e);if(t){var n=new MarkedStringPrinter('"').print(t);return n.push(this.selectorToSpecificityMarkedString(e)),n}return[]},e.prototype.simpleSelectorToMarkedString=function(e){var t=toElement(e),n=new MarkedStringPrinter('"').print(t);return n.push(this.selectorToSpecificityMarkedString(e)),n},e.prototype.isPseudoElementIdentifier=function(e){var t=e.match(/^::?([\w-]+)/);return!!t&&!!this.cssDataManager.getPseudoElement("::"+t[1])},e.prototype.selectorToSpecificityMarkedString=function(e){var t=this,n=function(e){for(var i=0,o=e.getChildren();i<o.length;i++){var s=o[i];switch(s.type){case nodes.NodeType.IdentifierSelector:r.id++;break;case nodes.NodeType.ClassSelector:case nodes.NodeType.AttributeSelector:r.attr++;break;case nodes.NodeType.ElementNameSelector:if(s.matches("*"))break;r.tag++;break;case nodes.NodeType.PseudoSelector:var a=s.getText();if(t.isPseudoElementIdentifier(a))r.tag++;else{if(a.match(/^:not/i))break;r.attr++}}s.getChildren().length>0&&n(s)}},r=new Specificity;return n(e),localize("specificity","[Selector Specificity](https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity): ({0}, {1}, {2})",r.id,r.attr,r.tag)},e}();export{SelectorPrinting};var SelectorElementBuilder=function(){function e(e){this.prev=null,this.element=e}return e.prototype.processSelector=function(e){var t=null;if(!(this.element instanceof RootElement)&&e.getChildren().some((function(e){return e.hasChildren()&&e.getChild(0).type===nodes.NodeType.SelectorCombinator}))){var n=this.element.findRoot();n.parent instanceof RootElement&&(t=this.element,this.element=n.parent,this.element.removeChild(n),this.prev=null)}for(var r=0,i=e.getChildren();r<i.length;r++){var o=i[r];if(o instanceof nodes.SimpleSelector){if(this.prev instanceof nodes.SimpleSelector){var s=new LabelElement("…");this.element.addChild(s),this.element=s}else this.prev&&(this.prev.matches("+")||this.prev.matches("~"))&&this.element.parent&&(this.element=this.element.parent);this.prev&&this.prev.matches("~")&&this.element.addChild(new LabelElement("⋮"));var a=toElement(o,t),l=a.findRoot();this.element.addChild(l),this.element=a}(o instanceof nodes.SimpleSelector||o.type===nodes.NodeType.SelectorCombinatorParent||o.type===nodes.NodeType.SelectorCombinatorShadowPiercingDescendant||o.type===nodes.NodeType.SelectorCombinatorSibling||o.type===nodes.NodeType.SelectorCombinatorAllSiblings)&&(this.prev=o)}},e}();function isNewSelectorContext(e){switch(e.type){case nodes.NodeType.MixinDeclaration:case nodes.NodeType.Stylesheet:return!0}return!1}export function selectorToElement(e){if(e.matches("@at-root"))return null;var t=new RootElement,n=[],r=e.getParent();if(r instanceof nodes.RuleSet)for(var i=r.getParent();i&&!isNewSelectorContext(i);){if(i instanceof nodes.RuleSet){if(i.getSelectors().matches("@at-root"))break;n.push(i)}i=i.getParent()}for(var o=new SelectorElementBuilder(t),s=n.length-1;s>=0;s--){var a=n[s].getSelectors().getChild(0);a&&o.processSelector(a)}return o.processSelector(e),t}
//# sourceMappingURL=/sm/f5eac1d59cedfc42bf5981b1cf8329a329e7038af2449d29107bbf826380b240.map