/**
 * Minified by jsDelivr using Terser v5.7.1.
 * Original file: /npm/monaco-editor@0.27.0/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonFolding.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{createScanner}from"./../../jsonc-parser/main.js";import{FoldingRangeKind,Position}from"../jsonLanguageTypes.js";export function getFoldingRanges(e,n){var t=[],i=[],r=[],o=-1,a=createScanner(e.getText(),!1),s=a.scan();function g(e){t.push(e),i.push(r.length)}for(;17!==s;){switch(s){case 1:case 3:var f={startLine:l=e.positionAt(a.getTokenOffset()).line,endLine:l,kind:1===s?"object":"array"};r.push(f);break;case 2:case 4:var d=2===s?"object":"array";if(r.length>0&&r[r.length-1].kind===d){f=r.pop();var c=e.positionAt(a.getTokenOffset()).line;f&&c>f.startLine+1&&o!==f.startLine&&(f.endLine=c-1,g(f),o=f.startLine)}break;case 13:var l=e.positionAt(a.getTokenOffset()).line,L=e.positionAt(a.getTokenOffset()+a.getTokenLength()).line;1===a.getTokenError()&&l+1<e.lineCount?a.setPosition(e.offsetAt(Position.create(l+1,0))):l<L&&(g({startLine:l,endLine:L,kind:FoldingRangeKind.Comment}),o=l);break;case 12:var p=e.getText().substr(a.getTokenOffset(),a.getTokenLength()).match(/^\/\/\s*#(region\b)|(endregion\b)/);if(p){c=e.positionAt(a.getTokenOffset()).line;if(p[1]){f={startLine:c,endLine:c,kind:FoldingRangeKind.Region};r.push(f)}else{for(var h=r.length-1;h>=0&&r[h].kind!==FoldingRangeKind.Region;)h--;if(h>=0){f=r[h];r.length=h,c>f.startLine&&o!==f.startLine&&(f.endLine=c,g(f),o=f.startLine)}}}}s=a.scan()}var k=n&&n.rangeLimit;if("number"!=typeof k||t.length<=k)return t;n&&n.onRangeLimitExceeded&&n.onRangeLimitExceeded(e.uri);for(var u=[],m=0,v=i;m<v.length;m++){(A=v[m])<30&&(u[A]=(u[A]||0)+1)}var T=0,b=0;for(h=0;h<u.length;h++){var R=u[h];if(R){if(R+T>k){b=h;break}T+=R}}var j=[];for(h=0;h<t.length;h++){var A;"number"==typeof(A=i[h])&&(A<b||A===b&&T++<k)&&j.push(t[h])}return j}
//# sourceMappingURL=/sm/fb617840d7f3fee460be2afa26c55a2653060651abf8b37ba014bf49d970f528.map