/**
 * Minified by jsDelivr using Terser v5.7.1.
 * Original file: /npm/monaco-editor@0.27.0/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonHover.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as Parser from"../parser/jsonParser.js";import{Range}from"../jsonLanguageTypes.js";var JSONHover=function(){function e(e,r,n){void 0===r&&(r=[]),this.schemaService=e,this.contributions=r,this.promise=n||Promise}return e.prototype.doHover=function(e,r,n){var t=e.offsetAt(r),o=n.getNodeFromOffset(t);if(!o||("object"===o.type||"array"===o.type)&&t>o.offset+1&&t<o.offset+o.length-1)return this.promise.resolve(null);var i=o;if("string"===o.type){var s=o.parent;if(s&&"property"===s.type&&s.keyNode===o&&!(o=s.valueNode))return this.promise.resolve(null)}for(var a=Range.create(e.positionAt(i.offset),e.positionAt(i.offset+i.length)),c=function(e){return{contents:e,range:a}},u=Parser.getNodePath(o),f=this.contributions.length-1;f>=0;f--){var m=this.contributions[f].getInfoContribution(e.uri,u);if(m)return m.then((function(e){return c(e)}))}return this.schemaService.getSchemaForResource(e.uri,n).then((function(e){if(e&&o){var r=n.getMatchingSchemas(e.schema,o.offset),t=void 0,i=void 0,s=void 0,a=void 0;r.every((function(e){if(e.node===o&&!e.inverted&&e.schema&&(t=t||e.schema.title,i=i||e.schema.markdownDescription||toMarkdown(e.schema.description),e.schema.enum)){var r=e.schema.enum.indexOf(Parser.getNodeValue(o));e.schema.markdownEnumDescriptions?s=e.schema.markdownEnumDescriptions[r]:e.schema.enumDescriptions&&(s=toMarkdown(e.schema.enumDescriptions[r])),s&&"string"!=typeof(a=e.schema.enum[r])&&(a=JSON.stringify(a))}return!0}));var u="";return t&&(u=toMarkdown(t)),i&&(u.length>0&&(u+="\n\n"),u+=i),s&&(u.length>0&&(u+="\n\n"),u+="`"+toMarkdownCodeBlock(a)+"`: "+s),c([u])}return null}))},e}();export{JSONHover};function toMarkdown(e){if(e)return e.replace(/([^\n\r])(\r?\n)([^\n\r])/gm,"$1\n\n$3").replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}function toMarkdownCodeBlock(e){return-1!==e.indexOf("`")?"`` "+e+" ``":e}
//# sourceMappingURL=/sm/23eed29a2de156eaa48f4e6bf606d3d1cb781269601b8dac913aed17488cddda.map