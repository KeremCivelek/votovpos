/**
 * Minified by jsDelivr using Terser v5.7.1.
 * Original file: /npm/monaco-editor@0.27.0/esm/vs/language/json/_deps/jsonc-parser/impl/parser.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";import{createScanner}from"./scanner.js";var ParseOptions;!function(e){e.DEFAULT={allowTrailingComma:!1}}(ParseOptions||(ParseOptions={}));export function getLocation(e,n){var t=[],r=new Object,o=void 0,a={value:{},offset:0,length:0,type:"object",parent:void 0},i=!1;function c(e,n,t,r){a.value=e,a.offset=n,a.length=t,a.type=r,a.colonOffset=void 0,o=a}try{visit(e,{onObjectBegin:function(e,a){if(n<=e)throw r;o=void 0,i=n>e,t.push("")},onObjectProperty:function(e,o,a){if(n<o)throw r;if(c(e,o,a,"property"),t[t.length-1]=e,n<=o+a)throw r},onObjectEnd:function(e,a){if(n<=e)throw r;o=void 0,t.pop()},onArrayBegin:function(e,a){if(n<=e)throw r;o=void 0,t.push(0)},onArrayEnd:function(e,a){if(n<=e)throw r;o=void 0,t.pop()},onLiteralValue:function(e,t,o){if(n<t)throw r;if(c(e,t,o,getNodeType(e)),n<=t+o)throw r},onSeparator:function(e,a,c){if(n<=a)throw r;if(":"===e&&o&&"property"===o.type)o.colonOffset=a,i=!1,o=void 0;else if(","===e){var f=t[t.length-1];"number"==typeof f?t[t.length-1]=f+1:(i=!0,t[t.length-1]=""),o=void 0}}})}catch(e){if(e!==r)throw e}return{path:t,previousNode:o,isAtPropertyKey:i,matches:function(e){for(var n=0,r=0;n<e.length&&r<t.length;r++)if(e[n]===t[r]||"*"===e[n])n++;else if("**"!==e[n])return!1;return n===e.length}}}export function parse(e,n,t){void 0===n&&(n=[]),void 0===t&&(t=ParseOptions.DEFAULT);var r=null,o=[],a=[];function i(e){Array.isArray(o)?o.push(e):null!==r&&(o[r]=e)}return visit(e,{onObjectBegin:function(){var e={};i(e),a.push(o),o=e,r=null},onObjectProperty:function(e){r=e},onObjectEnd:function(){o=a.pop()},onArrayBegin:function(){var e=[];i(e),a.push(o),o=e,r=null},onArrayEnd:function(){o=a.pop()},onLiteralValue:i,onError:function(e,t,r){n.push({error:e,offset:t,length:r})}},t),o[0]}export function parseTree(e,n,t){void 0===n&&(n=[]),void 0===t&&(t=ParseOptions.DEFAULT);var r={type:"array",offset:-1,length:-1,children:[],parent:void 0};function o(e){"property"===r.type&&(r.length=e-r.offset,r=r.parent)}function a(e){return r.children.push(e),e}visit(e,{onObjectBegin:function(e){r=a({type:"object",offset:e,length:-1,parent:r,children:[]})},onObjectProperty:function(e,n,t){(r=a({type:"property",offset:n,length:-1,parent:r,children:[]})).children.push({type:"string",value:e,offset:n,length:t,parent:r})},onObjectEnd:function(e,n){o(e+n),r.length=e+n-r.offset,r=r.parent,o(e+n)},onArrayBegin:function(e,n){r=a({type:"array",offset:e,length:-1,parent:r,children:[]})},onArrayEnd:function(e,n){r.length=e+n-r.offset,r=r.parent,o(e+n)},onLiteralValue:function(e,n,t){a({type:getNodeType(e),offset:n,length:t,parent:r,value:e}),o(n+t)},onSeparator:function(e,n,t){"property"===r.type&&(":"===e?r.colonOffset=n:","===e&&o(n))},onError:function(e,t,r){n.push({error:e,offset:t,length:r})}},t);var i=r.children[0];return i&&delete i.parent,i}export function findNodeAtLocation(e,n){if(e){for(var t=e,r=0,o=n;r<o.length;r++){var a=o[r];if("string"==typeof a){if("object"!==t.type||!Array.isArray(t.children))return;for(var i=!1,c=0,f=t.children;c<f.length;c++){var u=f[c];if(Array.isArray(u.children)&&u.children[0].value===a){t=u.children[1],i=!0;break}}if(!i)return}else{var s=a;if("array"!==t.type||s<0||!Array.isArray(t.children)||s>=t.children.length)return;t=t.children[s]}}return t}}export function getNodePath(e){if(!e.parent||!e.parent.children)return[];var n=getNodePath(e.parent);if("property"===e.parent.type){var t=e.parent.children[0].value;n.push(t)}else if("array"===e.parent.type){var r=e.parent.children.indexOf(e);-1!==r&&n.push(r)}return n}export function getNodeValue(e){switch(e.type){case"array":return e.children.map(getNodeValue);case"object":for(var n=Object.create(null),t=0,r=e.children;t<r.length;t++){var o=r[t],a=o.children[1];a&&(n[o.children[0].value]=getNodeValue(a))}return n;case"null":case"string":case"number":case"boolean":return e.value;default:return}}export function contains(e,n,t){return void 0===t&&(t=!1),n>=e.offset&&n<e.offset+e.length||t&&n===e.offset+e.length}export function findNodeAtOffset(e,n,t){if(void 0===t&&(t=!1),contains(e,n,t)){var r=e.children;if(Array.isArray(r))for(var o=0;o<r.length&&r[o].offset<=n;o++){var a=findNodeAtOffset(r[o],n,t);if(a)return a}return e}}export function visit(e,n,t){void 0===t&&(t=ParseOptions.DEFAULT);var r=createScanner(e,!1);function o(e){return e?function(){return e(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter())}:function(){return!0}}function a(e){return e?function(n){return e(n,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter())}:function(){return!0}}var i=o(n.onObjectBegin),c=a(n.onObjectProperty),f=o(n.onObjectEnd),u=o(n.onArrayBegin),s=o(n.onArrayEnd),l=a(n.onLiteralValue),p=a(n.onSeparator),h=o(n.onComment),g=a(n.onError),d=t&&t.disallowComments,v=t&&t.allowTrailingComma;function y(){for(;;){var e=r.scan();switch(r.getTokenError()){case 4:b(14);break;case 5:b(15);break;case 3:b(13);break;case 1:d||b(11);break;case 2:b(12);break;case 6:b(16)}switch(e){case 12:case 13:d?b(10):h();break;case 16:b(1);break;case 15:case 14:break;default:return e}}}function b(e,n,t){if(void 0===n&&(n=[]),void 0===t&&(t=[]),g(e),n.length+t.length>0)for(var o=r.getToken();17!==o;){if(-1!==n.indexOf(o)){y();break}if(-1!==t.indexOf(o))break;o=y()}}function k(e){var n=r.getTokenValue();return e?l(n):c(n),y(),!0}function T(){switch(r.getToken()){case 3:return function(){u(),y();for(var e=!1;4!==r.getToken()&&17!==r.getToken();){if(5===r.getToken()){if(e||b(4,[],[]),p(","),y(),4===r.getToken()&&v)break}else e&&b(6,[],[]);T()||b(4,[],[4,5]),e=!0}return s(),4!==r.getToken()?b(8,[4],[]):y(),!0}();case 1:return function(){i(),y();for(var e=!1;2!==r.getToken()&&17!==r.getToken();){if(5===r.getToken()){if(e||b(4,[],[]),p(","),y(),2===r.getToken()&&v)break}else e&&b(6,[],[]);(10!==r.getToken()?(b(3,[],[2,5]),0):(k(!1),6===r.getToken()?(p(":"),y(),T()||b(4,[],[2,5])):b(5,[],[2,5]),1))||b(4,[],[2,5]),e=!0}return f(),2!==r.getToken()?b(7,[2],[]):y(),!0}();case 10:return k(!0);default:return function(){switch(r.getToken()){case 11:var e=r.getTokenValue(),n=Number(e);isNaN(n)&&(b(2),n=0),l(n);break;case 7:l(null);break;case 8:l(!0);break;case 9:l(!1);break;default:return!1}return y(),!0}()}}return y(),17===r.getToken()?!!t.allowEmptyContent||(b(4,[],[]),!1):T()?(17!==r.getToken()&&b(9,[],[]),!0):(b(4,[],[]),!1)}export function stripComments(e,n){var t,r,o=createScanner(e),a=[],i=0;do{switch(r=o.getPosition(),t=o.scan()){case 12:case 13:case 17:i!==r&&a.push(e.substring(i,r)),void 0!==n&&a.push(o.getTokenValue().replace(/[^\r\n]/g,n)),i=o.getPosition()}}while(17!==t);return a.join("")}export function getNodeType(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":return e?Array.isArray(e)?"array":"object":"null";default:return"null"}}
//# sourceMappingURL=/sm/4e552e87c6b1d67d474e1f0d949f06cac49f53ee8441d338853358ecedeb5094.map