/**
 * Minified by jsDelivr using Terser v5.7.1.
 * Original file: /npm/monaco-editor@0.27.0/esm/vs/language/json/_deps/jsonc-parser/impl/format.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";import{createScanner}from"./scanner.js";export function format(e,r,t){var n,a,f,s,c;if(r){for(s=r.offset,c=s+r.length,f=s;f>0&&!isEOL(e,f-1);)f--;for(var o=c;o<e.length&&!isEOL(e,o);)o++;a=e.substring(f,o),n=computeIndentLevel(a,t)}else a=e,n=0,f=0,s=0,c=e.length;var i,u=getEOL(t,e),g=!1,l=0;i=t.insertSpaces?repeat(" ",t.tabSize||4):"\t";var h=createScanner(a,!1),v=!1;function k(){return u+repeat(i,n+l)}function b(){var e=h.scan();for(g=!1;15===e||14===e;)g=g||14===e,e=h.scan();return v=16===e||0!==h.getTokenError(),e}var p=[];function O(t,n,a){v||r&&!(n<c&&a>s)||e.substring(n,a)===t||p.push({offset:n,length:a-n,content:t})}var L=b();if(17!==L){var T=h.getTokenOffset()+f;O(repeat(i,n),f,T)}for(;17!==L;){for(var E=h.getTokenOffset()+h.getTokenLength()+f,m=b(),S="",A=!1;!g&&(12===m||13===m);){O(" ",E,h.getTokenOffset()+f),E=h.getTokenOffset()+h.getTokenLength()+f,S=(A=12===m)?k():"",m=b()}if(2===m)1!==L&&(l--,S=k());else if(4===m)3!==L&&(l--,S=k());else{switch(L){case 3:case 1:l++,S=k();break;case 5:case 12:S=k();break;case 13:g?S=k():A||(S=" ");break;case 6:A||(S=" ");break;case 10:if(6===m){A||(S="");break}case 7:case 8:case 9:case 11:case 2:case 4:12===m||13===m?A||(S=" "):5!==m&&17!==m&&(v=!0);break;case 16:v=!0}!g||12!==m&&13!==m||(S=k())}17===m&&(S=t.insertFinalNewline?u:""),O(S,E,h.getTokenOffset()+f),L=m}return p}function repeat(e,r){for(var t="",n=0;n<r;n++)t+=e;return t}function computeIndentLevel(e,r){for(var t=0,n=0,a=r.tabSize||4;t<e.length;){var f=e.charAt(t);if(" "===f)n++;else{if("\t"!==f)break;n+=a}t++}return Math.floor(n/a)}function getEOL(e,r){for(var t=0;t<r.length;t++){var n=r.charAt(t);if("\r"===n)return t+1<r.length&&"\n"===r.charAt(t+1)?"\r\n":"\r";if("\n"===n)return"\n"}return e&&e.eol||"\n"}export function isEOL(e,r){return-1!=="\r\n".indexOf(e.charAt(r))}
//# sourceMappingURL=/sm/b87a12d5038f5fca08f64815d4a61938fbd5d927c64994d0c356603467ada872.map