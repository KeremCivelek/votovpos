/**
 * Minified by jsDelivr using Terser v5.7.1.
 * Original file: /npm/monaco-editor@0.27.0/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonLinks.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Range}from"../jsonLanguageTypes.js";export function findLinks(e,r){var n=[];return r.visit((function(t){var i;if("property"===t.type&&"$ref"===t.keyNode.value&&"string"===(null===(i=t.valueNode)||void 0===i?void 0:i.type)){var o=t.valueNode.value,a=findTargetNode(r,o);if(a){var u=e.positionAt(a.offset);n.push({target:e.uri+"#"+(u.line+1)+","+(u.character+1),range:createRange(e,t.valueNode)})}}return!0})),Promise.resolve(n)}function createRange(e,r){return Range.create(e.positionAt(r.offset+1),e.positionAt(r.offset+r.length-1))}function findTargetNode(e,r){var n=parseJSONPointer(r);return n?findNode(n,e.root):null}function findNode(e,r){if(!r)return null;if(0===e.length)return r;var n=e.shift();if(r&&"object"===r.type){var t=r.properties.find((function(e){return e.keyNode.value===n}));return t?findNode(e,t.valueNode):null}if(r&&"array"===r.type&&n.match(/^(0|[1-9][0-9]*)$/)){var i=Number.parseInt(n),o=r.items[i];return o?findNode(e,o):null}return null}function parseJSONPointer(e){return"#"===e?[]:"#"!==e[0]||"/"!==e[1]?null:e.substring(2).split(/\//).map(unescape)}function unescape(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}
//# sourceMappingURL=/sm/cb3f4f5a5c1ca11ae50916a694c5499b50fb1c787f9b84cdc563bf5ffc505b25.map