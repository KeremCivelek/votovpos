/**
 * Minified by jsDelivr using Terser v5.7.1.
 * Original file: /npm/monaco-editor@0.27.0/esm/vs/language/json/_deps/vscode-json-languageservice/services/jsonDocumentSymbols.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as Parser from"../parser/jsonParser.js";import*as Strings from"../utils/strings.js";import{colorFromHex}from"../utils/colors.js";import{Range,TextEdit,SymbolKind,Location}from"../jsonLanguageTypes.js";var JSONDocumentSymbols=function(){function e(e){this.schemaService=e}return e.prototype.findDocumentSymbols=function(e,t,r){var n=this;void 0===r&&(r={resultLimit:Number.MAX_VALUE});var o=t.root;if(!o)return[];var i=r.resultLimit||Number.MAX_VALUE,a=e.uri;if(("vscode://defaultsettings/keybindings.json"===a||Strings.endsWith(a.toLowerCase(),"/user/keybindings.json"))&&"array"===o.type){for(var u=[],s=0,l=o.items;s<l.length;s++){var d=l[s];if("object"===d.type)for(var c=0,m=d.properties;c<m.length;c++){var g=m[c];if("key"===g.keyNode.value&&g.valueNode){var f=Location.create(e.uri,getRange(e,d));if(u.push({name:Parser.getNodeValue(g.valueNode),kind:SymbolKind.Function,location:f}),--i<=0)return r&&r.onResultLimitExceeded&&r.onResultLimitExceeded(a),u}}}return u}for(var y=[{node:o,containerName:""}],p=0,v=!1,h=[],b=function(t,r){"array"===t.type?t.items.forEach((function(e){e&&y.push({node:e,containerName:r})})):"object"===t.type&&t.properties.forEach((function(t){var o=t.valueNode;if(o)if(i>0){i--;var a=Location.create(e.uri,getRange(e,t)),u=r?r+"."+t.keyNode.value:t.keyNode.value;h.push({name:n.getKeyLabel(t),kind:n.getSymbolKind(o.type),location:a,containerName:r}),y.push({node:o,containerName:u})}else v=!0}))};p<y.length;){var S=y[p++];b(S.node,S.containerName)}return v&&r&&r.onResultLimitExceeded&&r.onResultLimitExceeded(a),h},e.prototype.findDocumentSymbols2=function(e,t,r){var n=this;void 0===r&&(r={resultLimit:Number.MAX_VALUE});var o=t.root;if(!o)return[];var i=r.resultLimit||Number.MAX_VALUE,a=e.uri;if(("vscode://defaultsettings/keybindings.json"===a||Strings.endsWith(a.toLowerCase(),"/user/keybindings.json"))&&"array"===o.type){for(var u=[],s=0,l=o.items;s<l.length;s++){var d=l[s];if("object"===d.type)for(var c=0,m=d.properties;c<m.length;c++){var g=m[c];if("key"===g.keyNode.value&&g.valueNode){var f=getRange(e,d),y=getRange(e,g.keyNode);if(u.push({name:Parser.getNodeValue(g.valueNode),kind:SymbolKind.Function,range:f,selectionRange:y}),--i<=0)return r&&r.onResultLimitExceeded&&r.onResultLimitExceeded(a),u}}}return u}for(var p=[],v=[{node:o,result:p}],h=0,b=!1,S=function(t,r){"array"===t.type?t.items.forEach((function(t,o){if(t)if(i>0){i--;var a=getRange(e,t),u=a,s={name:String(o),kind:n.getSymbolKind(t.type),range:a,selectionRange:u,children:[]};r.push(s),v.push({result:s.children,node:t})}else b=!0})):"object"===t.type&&t.properties.forEach((function(t){var o=t.valueNode;if(o)if(i>0){i--;var a=getRange(e,t),u=getRange(e,t.keyNode),s=[],l={name:n.getKeyLabel(t),kind:n.getSymbolKind(o.type),range:a,selectionRange:u,children:s,detail:n.getDetail(o)};r.push(l),v.push({result:s,node:o})}else b=!0}))};h<v.length;){var L=v[h++];S(L.node,L.result)}return b&&r&&r.onResultLimitExceeded&&r.onResultLimitExceeded(a),p},e.prototype.getSymbolKind=function(e){switch(e){case"object":return SymbolKind.Module;case"string":return SymbolKind.String;case"number":return SymbolKind.Number;case"array":return SymbolKind.Array;case"boolean":return SymbolKind.Boolean;default:return SymbolKind.Variable}},e.prototype.getKeyLabel=function(e){var t=e.keyNode.value;return t&&(t=t.replace(/[\n]/g,"â†µ")),t&&t.trim()?t:'"'+t+'"'},e.prototype.getDetail=function(e){if(e)return"boolean"===e.type||"number"===e.type||"null"===e.type||"string"===e.type?String(e.value):"array"===e.type?e.children.length?void 0:"[]":"object"===e.type?e.children.length?void 0:"{}":void 0},e.prototype.findDocumentColors=function(e,t,r){return this.schemaService.getSchemaForResource(e.uri,t).then((function(n){var o=[];if(n)for(var i=r&&"number"==typeof r.resultLimit?r.resultLimit:Number.MAX_VALUE,a={},u=0,s=t.getMatchingSchemas(n.schema);u<s.length;u++){var l=s[u];if(!l.inverted&&l.schema&&("color"===l.schema.format||"color-hex"===l.schema.format)&&l.node&&"string"===l.node.type){var d=String(l.node.offset);if(!a[d]){var c=colorFromHex(Parser.getNodeValue(l.node));if(c){var m=getRange(e,l.node);o.push({color:c,range:m})}if(a[d]=!0,--i<=0)return r&&r.onResultLimitExceeded&&r.onResultLimitExceeded(e.uri),o}}}return o}))},e.prototype.getColorPresentations=function(e,t,r,n){var o,i=[],a=Math.round(255*r.red),u=Math.round(255*r.green),s=Math.round(255*r.blue);function l(e){var t=e.toString(16);return 2!==t.length?"0"+t:t}return o=1===r.alpha?"#"+l(a)+l(u)+l(s):"#"+l(a)+l(u)+l(s)+l(Math.round(255*r.alpha)),i.push({label:o,textEdit:TextEdit.replace(n,JSON.stringify(o))}),i},e}();export{JSONDocumentSymbols};function getRange(e,t){return Range.create(e.positionAt(t.offset),e.positionAt(t.offset+t.length))}
//# sourceMappingURL=/sm/445783b6dbeb6ed6ae58e244690e050f1172011f96e07d27832b3d69271e06c3.map