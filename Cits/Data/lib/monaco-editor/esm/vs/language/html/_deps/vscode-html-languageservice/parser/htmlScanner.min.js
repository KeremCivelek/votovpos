/**
 * Minified by jsDelivr using Terser v5.7.1.
 * Original file: /npm/monaco-editor@0.27.0/esm/vs/language/html/_deps/vscode-html-languageservice/parser/htmlScanner.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as nls from"./../../../fillers/vscode-nls.js";import{TokenType,ScannerState}from"../htmlLanguageTypes.js";var localize=nls.loadMessageBundle(),MultiLineStream=function(){function e(e,t){this.source=e,this.len=e.length,this.position=t}return e.prototype.eos=function(){return this.len<=this.position},e.prototype.getSource=function(){return this.source},e.prototype.pos=function(){return this.position},e.prototype.goBackTo=function(e){this.position=e},e.prototype.goBack=function(e){this.position-=e},e.prototype.advance=function(e){this.position+=e},e.prototype.goToEnd=function(){this.position=this.source.length},e.prototype.nextChar=function(){return this.source.charCodeAt(this.position++)||0},e.prototype.peekChar=function(e){return void 0===e&&(e=0),this.source.charCodeAt(this.position+e)||0},e.prototype.advanceIfChar=function(e){return e===this.source.charCodeAt(this.position)&&(this.position++,!0)},e.prototype.advanceIfChars=function(e){var t;if(this.position+e.length>this.source.length)return!1;for(t=0;t<e.length;t++)if(this.source.charCodeAt(this.position+t)!==e[t])return!1;return this.advance(t),!0},e.prototype.advanceIfRegExp=function(e){var t=this.source.substr(this.position).match(e);return t?(this.position=this.position+t.index+t[0].length,t[0]):""},e.prototype.advanceUntilRegExp=function(e){var t=this.source.substr(this.position).match(e);return t?(this.position=this.position+t.index,t[0]):(this.goToEnd(),"")},e.prototype.advanceUntilChar=function(e){for(;this.position<this.source.length;){if(this.source.charCodeAt(this.position)===e)return!0;this.advance(1)}return!1},e.prototype.advanceUntilChars=function(e){for(;this.position+e.length<=this.source.length;){for(var t=0;t<e.length&&this.source.charCodeAt(this.position+t)===e[t];t++);if(t===e.length)return!0;this.advance(1)}return this.goToEnd(),!1},e.prototype.skipWhitespace=function(){return this.advanceWhileChar((function(e){return e===_WSP||e===_TAB||e===_NWL||e===_LFD||e===_CAR}))>0},e.prototype.advanceWhileChar=function(e){for(var t=this.position;this.position<this.len&&e(this.source.charCodeAt(this.position));)this.position++;return this.position-t},e}(),_BNG="!".charCodeAt(0),_MIN="-".charCodeAt(0),_LAN="<".charCodeAt(0),_RAN=">".charCodeAt(0),_FSL="/".charCodeAt(0),_EQS="=".charCodeAt(0),_DQO='"'.charCodeAt(0),_SQO="'".charCodeAt(0),_NWL="\n".charCodeAt(0),_CAR="\r".charCodeAt(0),_LFD="\f".charCodeAt(0),_WSP=" ".charCodeAt(0),_TAB="\t".charCodeAt(0),htmlScriptContents={"text/x-handlebars-template":!0,"text/html":!0};export function createScanner(e,t,n,a){void 0===t&&(t=0),void 0===n&&(n=ScannerState.WithinContent),void 0===a&&(a=!1);var r,o,i,c,s,p=new MultiLineStream(e,t),h=n,T=0,u=TokenType.Unknown;function S(){return p.advanceIfRegExp(/^[_:\w][_:\w-.\d]*/).toLowerCase()}function d(e,t,n){return u=t,T=e,r=n,t}function g(){var e,t=p.pos();if(p.eos())return d(t,TokenType.EOS);switch(h){case ScannerState.WithinComment:return p.advanceIfChars([_MIN,_MIN,_RAN])?(h=ScannerState.WithinContent,d(t,TokenType.EndCommentTag)):(p.advanceUntilChars([_MIN,_MIN,_RAN]),d(t,TokenType.Comment));case ScannerState.WithinDoctype:return p.advanceIfChar(_RAN)?(h=ScannerState.WithinContent,d(t,TokenType.EndDoctypeTag)):(p.advanceUntilChar(_RAN),d(t,TokenType.Doctype));case ScannerState.WithinContent:if(p.advanceIfChar(_LAN)){if(!p.eos()&&p.peekChar()===_BNG){if(p.advanceIfChars([_BNG,_MIN,_MIN]))return h=ScannerState.WithinComment,d(t,TokenType.StartCommentTag);if(p.advanceIfRegExp(/^!doctype/i))return h=ScannerState.WithinDoctype,d(t,TokenType.StartDoctypeTag)}return p.advanceIfChar(_FSL)?(h=ScannerState.AfterOpeningEndTag,d(t,TokenType.EndTagOpen)):(h=ScannerState.AfterOpeningStartTag,d(t,TokenType.StartTagOpen))}return p.advanceUntilChar(_LAN),d(t,TokenType.Content);case ScannerState.AfterOpeningEndTag:return S().length>0?(h=ScannerState.WithinEndTag,d(t,TokenType.EndTag)):p.skipWhitespace()?d(t,TokenType.Whitespace,localize("error.unexpectedWhitespace","Tag name must directly follow the open bracket.")):(h=ScannerState.WithinEndTag,p.advanceUntilChar(_RAN),t<p.pos()?d(t,TokenType.Unknown,localize("error.endTagNameExpected","End tag name expected.")):g());case ScannerState.WithinEndTag:if(p.skipWhitespace())return d(t,TokenType.Whitespace);if(p.advanceIfChar(_RAN))return h=ScannerState.WithinContent,d(t,TokenType.EndTagClose);if(a&&p.peekChar()===_LAN)return h=ScannerState.WithinContent,d(t,TokenType.EndTagClose,localize("error.closingBracketMissing","Closing bracket missing."));e=localize("error.closingBracketExpected","Closing bracket expected.");break;case ScannerState.AfterOpeningStartTag:return i=S(),s=void 0,c=void 0,i.length>0?(o=!1,h=ScannerState.WithinTag,d(t,TokenType.StartTag)):p.skipWhitespace()?d(t,TokenType.Whitespace,localize("error.unexpectedWhitespace","Tag name must directly follow the open bracket.")):(h=ScannerState.WithinTag,p.advanceUntilChar(_RAN),t<p.pos()?d(t,TokenType.Unknown,localize("error.startTagNameExpected","Start tag name expected.")):g());case ScannerState.WithinTag:return p.skipWhitespace()?(o=!0,d(t,TokenType.Whitespace)):o&&(c=p.advanceIfRegExp(/^[^\s"'></=\x00-\x0F\x7F\x80-\x9F]*/).toLowerCase()).length>0?(h=ScannerState.AfterAttributeName,o=!1,d(t,TokenType.AttributeName)):p.advanceIfChars([_FSL,_RAN])?(h=ScannerState.WithinContent,d(t,TokenType.StartTagSelfClose)):p.advanceIfChar(_RAN)?(h="script"===i?s&&htmlScriptContents[s]?ScannerState.WithinContent:ScannerState.WithinScriptContent:"style"===i?ScannerState.WithinStyleContent:ScannerState.WithinContent,d(t,TokenType.StartTagClose)):a&&p.peekChar()===_LAN?(h=ScannerState.WithinContent,d(t,TokenType.StartTagClose,localize("error.closingBracketMissing","Closing bracket missing."))):(p.advance(1),d(t,TokenType.Unknown,localize("error.unexpectedCharacterInTag","Unexpected character in tag.")));case ScannerState.AfterAttributeName:return p.skipWhitespace()?(o=!0,d(t,TokenType.Whitespace)):p.advanceIfChar(_EQS)?(h=ScannerState.BeforeAttributeValue,d(t,TokenType.DelimiterAssign)):(h=ScannerState.WithinTag,g());case ScannerState.BeforeAttributeValue:if(p.skipWhitespace())return d(t,TokenType.Whitespace);var n=p.advanceIfRegExp(/^[^\s"'`=<>]+/);if(n.length>0)return p.peekChar()===_RAN&&p.peekChar(-1)===_FSL&&(p.goBack(1),n=n.substr(0,n.length-1)),"type"===c&&(s=n),h=ScannerState.WithinTag,o=!1,d(t,TokenType.AttributeValue);var r=p.peekChar();return r===_SQO||r===_DQO?(p.advance(1),p.advanceUntilChar(r)&&p.advance(1),"type"===c&&(s=p.getSource().substring(t+1,p.pos()-1)),h=ScannerState.WithinTag,o=!1,d(t,TokenType.AttributeValue)):(h=ScannerState.WithinTag,o=!1,g());case ScannerState.WithinScriptContent:for(var T=1;!p.eos();){var u=p.advanceIfRegExp(/<!--|-->|<\/?script\s*\/?>?/i);if(0===u.length)return p.goToEnd(),d(t,TokenType.Script);if("\x3c!--"===u)1===T&&(T=2);else if("--\x3e"===u)T=1;else if("/"!==u[1])2===T&&(T=3);else{if(3!==T){p.goBack(u.length);break}T=2}}return h=ScannerState.WithinContent,t<p.pos()?d(t,TokenType.Script):g();case ScannerState.WithinStyleContent:return p.advanceUntilRegExp(/<\/style/i),h=ScannerState.WithinContent,t<p.pos()?d(t,TokenType.Styles):g()}return p.advance(1),h=ScannerState.WithinContent,d(t,TokenType.Unknown,e)}return{scan:function(){var e=p.pos(),t=h,n=g();return n===TokenType.EOS||e!==p.pos()||a&&(n===TokenType.StartTagClose||n===TokenType.EndTagClose)?n:(console.log("Scanner.scan has not advanced at offset "+e+", state before: "+t+" after: "+h),p.advance(1),d(e,TokenType.Unknown))},getTokenType:function(){return u},getTokenOffset:function(){return T},getTokenLength:function(){return p.pos()-T},getTokenEnd:function(){return p.pos()},getTokenText:function(){return p.getSource().substring(T,p.pos())},getScannerState:function(){return h},getTokenError:function(){return r}}}
//# sourceMappingURL=/sm/5d82ec5579601ad0272bae603e4534ea83c1d8a0ae036b5bdc545c0fd75f63e2.map