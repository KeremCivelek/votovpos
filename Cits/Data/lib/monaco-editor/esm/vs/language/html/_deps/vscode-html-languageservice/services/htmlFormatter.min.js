/**
 * Minified by jsDelivr using Terser v5.7.1.
 * Original file: /npm/monaco-editor@0.27.0/esm/vs/language/html/_deps/vscode-html-languageservice/services/htmlFormatter.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Range,Position}from"../htmlLanguageTypes.js";import{html_beautify}from"../beautify/beautify-html.js";import{repeat}from"../utils/strings.js";export function format(t,e,n){var r=t.getText(),i=!0,a=0,o=n.tabSize||4;if(e){for(var s=t.offsetAt(e.start),p=s;p>0&&isWhitespace(r,p-1);)p--;0===p||isEOL(r,p-1)?s=p:p<s&&(s=p+1);for(var m=t.offsetAt(e.end),g=m;g<r.length&&isWhitespace(r,g);)g++;(g===r.length||isEOL(r,g))&&(m=g),e=Range.create(t.positionAt(s),t.positionAt(m));var f=r.substring(0,s);if(new RegExp(/.*[<][^>]*$/).test(f))return[{range:e,newText:r=r.substring(s,m)}];if(i=m===r.length,r=r.substring(s,m),0!==s){var u=t.offsetAt(Position.create(e.start.line,0));a=computeIndentLevel(t.getText(),u,n)}}else e=Range.create(Position.create(0,0),t.positionAt(r.length));var l={indent_size:o,indent_char:n.insertSpaces?" ":"\t",indent_empty_lines:getFormatOption(n,"indentEmptyLines",!1),wrap_line_length:getFormatOption(n,"wrapLineLength",120),unformatted:getTagsFormatOption(n,"unformatted",void 0),content_unformatted:getTagsFormatOption(n,"contentUnformatted",void 0),indent_inner_html:getFormatOption(n,"indentInnerHtml",!1),preserve_newlines:getFormatOption(n,"preserveNewLines",!0),max_preserve_newlines:getFormatOption(n,"maxPreserveNewLines",32786),indent_handlebars:getFormatOption(n,"indentHandlebars",!1),end_with_newline:i&&getFormatOption(n,"endWithNewline",!1),extra_liners:getTagsFormatOption(n,"extraLiners",void 0),wrap_attributes:getFormatOption(n,"wrapAttributes","auto"),wrap_attributes_indent_size:getFormatOption(n,"wrapAttributesIndentSize",void 0),eol:"\n",indent_scripts:getFormatOption(n,"indentScripts","normal"),templating:getTemplatingFormatOption(n,"all"),unformatted_content_delimiter:getFormatOption(n,"unformattedContentDelimiter","")},c=html_beautify(trimLeft(r),l);if(a>0){var d=n.insertSpaces?repeat(" ",o*a):repeat("\t",a);c=c.split("\n").join("\n"+d),0===e.start.character&&(c=d+c)}return[{range:e,newText:c}]}function trimLeft(t){return t.replace(/^\s+/,"")}function getFormatOption(t,e,n){if(t&&t.hasOwnProperty(e)){var r=t[e];if(null!==r)return r}return n}function getTagsFormatOption(t,e,n){var r=getFormatOption(t,e,null);return"string"==typeof r?r.length>0?r.split(",").map((function(t){return t.trim().toLowerCase()})):[]:n}function getTemplatingFormatOption(t,e){return!0===getFormatOption(t,"templating",e)?["auto"]:["none"]}function computeIndentLevel(t,e,n){for(var r=e,i=0,a=n.tabSize||4;r<t.length;){var o=t.charAt(r);if(" "===o)i++;else{if("\t"!==o)break;i+=a}r++}return Math.floor(i/a)}function getEOL(t){var e=t.getText();if(t.lineCount>1){for(var n=t.offsetAt(Position.create(1,0)),r=n;r>0&&isEOL(e,r-1);)r--;return e.substr(r,n-r)}return"\n"}function isEOL(t,e){return-1!=="\r\n".indexOf(t.charAt(e))}function isWhitespace(t,e){return-1!==" \t".indexOf(t.charAt(e))}
//# sourceMappingURL=/sm/42caaf36b8113379f8ae6698084657d6f40856e41c48e3b5d318f9ace535ccee.map