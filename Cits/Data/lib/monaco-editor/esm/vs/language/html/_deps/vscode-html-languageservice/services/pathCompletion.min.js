/**
 * Minified by jsDelivr using Terser v5.7.1.
 * Original file: /npm/monaco-editor@0.27.0/esm/vs/language/html/_deps/vscode-html-languageservice/services/pathCompletion.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __awaiter=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{c(n.next(t))}catch(t){o(t)}}function s(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}c((n=n.apply(t,e||[])).next())}))},__generator=this&&this.__generator||function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};import{CompletionItemKind,TextEdit,Range,Position,FileType}from"../htmlLanguageTypes.js";import{startsWith}from"../utils/strings.js";var PathCompletionParticipant=function(){function t(t){this.readDirectory=t,this.atributeCompletions=[]}return t.prototype.onHtmlAttributeValue=function(t){isPathAttribute(t.tag,t.attribute)&&this.atributeCompletions.push(t)},t.prototype.computeCompletions=function(t,e){return __awaiter(this,void 0,void 0,(function(){var r,n,i,o,a,s,c,u,l,h;return __generator(this,(function(f){switch(f.label){case 0:r={items:[],isIncomplete:!1},n=0,i=this.atributeCompletions,f.label=1;case 1:return n<i.length?(o=i[n],isCompletablePath(a=stripQuotes(t.getText(o.range)))?"."!==a&&".."!==a?[3,2]:(r.isIncomplete=!0,[3,4]):[3,4]):[3,5];case 2:return s=pathToReplaceRange(o.value,a,o.range),[4,this.providePathSuggestions(o.value,s,t,e)];case 3:for(c=f.sent(),u=0,l=c;u<l.length;u++)h=l[u],r.items.push(h);f.label=4;case 4:return n++,[3,1];case 5:return[2,r]}}))}))},t.prototype.providePathSuggestions=function(t,e,r,n){return __awaiter(this,void 0,void 0,(function(){var i,o,a,s,c,u,l,h,f;return __generator(this,(function(p){switch(p.label){case 0:if(i=t.substring(0,t.lastIndexOf("/")+1),!(o=n.resolveReference(i||".",r.uri)))return[3,4];p.label=1;case 1:return p.trys.push([1,3,,4]),a=[],[4,this.readDirectory(o)];case 2:for(s=p.sent(),c=0,u=s;c<u.length;c++)l=u[c],h=l[0],f=l[1],h.charCodeAt(0)!==CharCode_dot&&a.push(createCompletionItem(h,f===FileType.Directory,e));return[2,a];case 3:return p.sent(),[3,4];case 4:return[2,[]]}}))}))},t}();export{PathCompletionParticipant};var CharCode_dot=".".charCodeAt(0);function stripQuotes(t){return startsWith(t,"'")||startsWith(t,'"')?t.slice(1,-1):t}function isCompletablePath(t){return!(startsWith(t,"http")||startsWith(t,"https")||startsWith(t,"//"))}function isPathAttribute(t,e){var r=PATH_TAG_AND_ATTR[t];return!!r&&("string"==typeof r?r===e:-1!==r.indexOf(e))}function pathToReplaceRange(t,e,r){var n,i=t.lastIndexOf("/");if(-1===i)n=shiftRange(r,1,-1);else{var o=e.slice(i+1),a=shiftPosition(r.end,-1-o.length),s=o.indexOf(" "),c=void 0;c=-1!==s?shiftPosition(a,s):shiftPosition(r.end,-1),n=Range.create(a,c)}return n}function createCompletionItem(t,e,r){return e?{label:t+="/",kind:CompletionItemKind.Folder,textEdit:TextEdit.replace(r,t),command:{title:"Suggest",command:"editor.action.triggerSuggest"}}:{label:t,kind:CompletionItemKind.File,textEdit:TextEdit.replace(r,t)}}function shiftPosition(t,e){return Position.create(t.line,t.character+e)}function shiftRange(t,e,r){var n=shiftPosition(t.start,e),i=shiftPosition(t.end,r);return Range.create(n,i)}var PATH_TAG_AND_ATTR={a:"href",area:"href",body:"background",del:"cite",form:"action",frame:["src","longdesc"],img:["src","longdesc"],ins:"cite",link:"href",object:"data",q:"cite",script:"src",audio:"src",button:"formaction",command:"icon",embed:"src",html:"manifest",input:["src","formaction"],source:"src",track:"src",video:["src","poster"]};
//# sourceMappingURL=/sm/100e946e65e6df24f11f03c6832dd4466459d0e3a1e5bf18f63b249c384caa4e.map