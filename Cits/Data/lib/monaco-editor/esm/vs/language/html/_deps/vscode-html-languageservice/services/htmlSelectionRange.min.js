/**
 * Minified by jsDelivr using Terser v5.7.1.
 * Original file: /npm/monaco-editor@0.27.0/esm/vs/language/html/_deps/vscode-html-languageservice/services/htmlSelectionRange.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{createScanner}from"../parser/htmlScanner.js";import{parse}from"../parser/htmlParser.js";import{TokenType,Range,SelectionRange}from"../htmlLanguageTypes.js";export function getSelectionRanges(t,e){return e.map((function(e){for(var n=getApplicableRanges(t,e),a=void 0,r=void 0,g=n.length-1;g>=0;g--){var s=n[g];a&&s[0]===a[0]&&s[1]===a[1]||(r=SelectionRange.create(Range.create(t.positionAt(n[g][0]),t.positionAt(n[g][1])),r)),a=s}return r||(r=SelectionRange.create(Range.create(e,e))),r}))}function getApplicableRanges(t,e){var n=parse(t.getText()),a=t.offsetAt(e),r=n.findNodeAt(a),g=getAllParentTagRanges(r);if(r.startTagEnd&&!r.endTagStart){if(r.startTagEnd!==r.end)return[[r.start,r.end]];var s=Range.create(t.positionAt(r.startTagEnd-2),t.positionAt(r.startTagEnd));return"/>"===t.getText(s)?g.unshift([r.start+1,r.startTagEnd-2]):g.unshift([r.start+1,r.startTagEnd-1]),g=getAttributeLevelRanges(t,r,a).concat(g)}return r.startTagEnd&&r.endTagStart?(g.unshift([r.start,r.end]),r.start<a&&a<r.startTagEnd?(g.unshift([r.start+1,r.startTagEnd-1]),g=getAttributeLevelRanges(t,r,a).concat(g)):r.startTagEnd<=a&&a<=r.endTagStart?(g.unshift([r.startTagEnd,r.endTagStart]),g):(a>=r.endTagStart+2&&g.unshift([r.endTagStart+2,r.end-1]),g)):g}function getAllParentTagRanges(t){for(var e,n=t,a=[];n.parent;)n=n.parent,(e=n,e.startTagEnd&&e.endTagStart&&e.startTagEnd<e.endTagStart?[[e.startTagEnd,e.endTagStart],[e.start,e.end]]:[[e.start,e.end]]).forEach((function(t){return a.push(t)}));return a}function getAttributeLevelRanges(t,e,n){for(var a=Range.create(t.positionAt(e.start),t.positionAt(e.end)),r=t.getText(a),g=n-e.start,s=createScanner(r),o=s.scan(),T=e.start,i=[],f=!1,d=-1;o!==TokenType.EOS;){switch(o){case TokenType.AttributeName:if(g<s.getTokenOffset()){f=!1;break}g<=s.getTokenEnd()&&i.unshift([s.getTokenOffset(),s.getTokenEnd()]),f=!0,d=s.getTokenOffset();break;case TokenType.AttributeValue:if(!f)break;var u=s.getTokenText();if(g<s.getTokenOffset()){i.push([d,s.getTokenEnd()]);break}g>=s.getTokenOffset()&&g<=s.getTokenEnd()&&(i.unshift([s.getTokenOffset(),s.getTokenEnd()]),('"'===u[0]&&'"'===u[u.length-1]||"'"===u[0]&&"'"===u[u.length-1])&&g>=s.getTokenOffset()+1&&g<=s.getTokenEnd()-1&&i.unshift([s.getTokenOffset()+1,s.getTokenEnd()-1]),i.push([d,s.getTokenEnd()]))}o=s.scan()}return i.map((function(t){return[t[0]+T,t[1]+T]}))}
//# sourceMappingURL=/sm/8754fac21180fe23d65f877b299c827668f270ce18af0a3fe3010aff7eb5ae14.map