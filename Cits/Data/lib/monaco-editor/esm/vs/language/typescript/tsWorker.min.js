/**
 * Minified by jsDelivr using Terser v5.7.1.
 * Original file: /npm/monaco-editor@0.27.0/esm/vs/language/typescript/tsWorker.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},__awaiter=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},__generator=this&&this.__generator||function(t,e){var i,r,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};import*as ts from"./lib/typescriptServices.js";import{libFileMap}from"./lib/lib.js";function fileNameIsLib(t){return"string"==typeof t?!!/^file:\/\/\//.test(t)&&!!libFileMap[t.substr(8)]:0===t.path.indexOf("/lib.")&&!!libFileMap[t.path.slice(1)]}var TypeScriptWorker=function(){function t(t,e){this._extraLibs=Object.create(null),this._languageService=ts.createLanguageService(this),this._ctx=t,this._compilerOptions=e.compilerOptions,this._extraLibs=e.extraLibs}return t.prototype.getCompilationSettings=function(){return this._compilerOptions},t.prototype.getScriptFileNames=function(){return this._ctx.getMirrorModels().map((function(t){return t.uri})).filter((function(t){return!fileNameIsLib(t)})).map((function(t){return t.toString()})).concat(Object.keys(this._extraLibs))},t.prototype._getModel=function(t){for(var e=this._ctx.getMirrorModels(),i=0;i<e.length;i++)if(e[i].uri.toString()===t)return e[i];return null},t.prototype.getScriptVersion=function(t){var e=this._getModel(t);return e?e.version.toString():this.isDefaultLibFileName(t)?"1":t in this._extraLibs?String(this._extraLibs[t].version):""},t.prototype.getScriptText=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return[2,this._getScriptText(t)]}))}))},t.prototype._getScriptText=function(t){var e,i=this._getModel(t),r="lib."+t+".d.ts";if(i)e=i.getValue();else if(t in libFileMap)e=libFileMap[t];else if(r in libFileMap)e=libFileMap[r];else{if(!(t in this._extraLibs))return;e=this._extraLibs[t].content}return e},t.prototype.getScriptSnapshot=function(t){var e=this._getScriptText(t);if(void 0!==e)return{getText:function(t,i){return e.substring(t,i)},getLength:function(){return e.length},getChangeRange:function(){}}},t.prototype.getScriptKind=function(t){switch(t.substr(t.lastIndexOf(".")+1)){case"ts":return ts.ScriptKind.TS;case"tsx":return ts.ScriptKind.TSX;case"js":return ts.ScriptKind.JS;case"jsx":return ts.ScriptKind.JSX;default:return this.getCompilationSettings().allowJs?ts.ScriptKind.JS:ts.ScriptKind.TS}},t.prototype.getCurrentDirectory=function(){return""},t.prototype.getDefaultLibFileName=function(t){switch(t.target){case 99:var e="lib.esnext.full.d.ts";if(e in libFileMap||e in this._extraLibs)return e;case 7:case 6:case 5:case 4:case 3:case 2:default:var i="lib.es"+(2013+(t.target||99))+".full.d.ts";return i in libFileMap||i in this._extraLibs?i:"lib.es6.d.ts";case 1:case 0:return"lib.d.ts"}},t.prototype.isDefaultLibFileName=function(t){return t===this.getDefaultLibFileName(this._compilerOptions)},t.prototype.getLibFiles=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return[2,libFileMap]}))}))},t.clearFiles=function(t){for(var e=[],i=0,r=t;i<r.length;i++){var n=r[i],o=__assign({},n);if(o.file=o.file?{fileName:o.file.fileName}:void 0,n.relatedInformation){o.relatedInformation=[];for(var a=0,s=n.relatedInformation;a<s.length;a++){var u=s[a],c=__assign({},u);c.file=c.file?{fileName:c.file.fileName}:void 0,o.relatedInformation.push(c)}}e.push(o)}return e},t.prototype.getSyntacticDiagnostics=function(e){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(r){return fileNameIsLib(e)?[2,[]]:(i=this._languageService.getSyntacticDiagnostics(e),[2,t.clearFiles(i)])}))}))},t.prototype.getSemanticDiagnostics=function(e){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(r){return fileNameIsLib(e)?[2,[]]:(i=this._languageService.getSemanticDiagnostics(e),[2,t.clearFiles(i)])}))}))},t.prototype.getSuggestionDiagnostics=function(e){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(r){return fileNameIsLib(e)?[2,[]]:(i=this._languageService.getSuggestionDiagnostics(e),[2,t.clearFiles(i)])}))}))},t.prototype.getCompilerOptionsDiagnostics=function(e){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(r){return fileNameIsLib(e)?[2,[]]:(i=this._languageService.getCompilerOptionsDiagnostics(),[2,t.clearFiles(i)])}))}))},t.prototype.getCompletionsAtPosition=function(t,e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){return fileNameIsLib(t)?[2,void 0]:[2,this._languageService.getCompletionsAtPosition(t,e,void 0)]}))}))},t.prototype.getCompletionEntryDetails=function(t,e,i){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(r){return[2,this._languageService.getCompletionEntryDetails(t,e,i,void 0,void 0,void 0,void 0)]}))}))},t.prototype.getSignatureHelpItems=function(t,e,i){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(r){return fileNameIsLib(t)?[2,void 0]:[2,this._languageService.getSignatureHelpItems(t,e,i)]}))}))},t.prototype.getQuickInfoAtPosition=function(t,e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){return fileNameIsLib(t)?[2,void 0]:[2,this._languageService.getQuickInfoAtPosition(t,e)]}))}))},t.prototype.getOccurrencesAtPosition=function(t,e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){return fileNameIsLib(t)?[2,void 0]:[2,this._languageService.getOccurrencesAtPosition(t,e)]}))}))},t.prototype.getDefinitionAtPosition=function(t,e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){return fileNameIsLib(t)?[2,void 0]:[2,this._languageService.getDefinitionAtPosition(t,e)]}))}))},t.prototype.getReferencesAtPosition=function(t,e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){return fileNameIsLib(t)?[2,void 0]:[2,this._languageService.getReferencesAtPosition(t,e)]}))}))},t.prototype.getNavigationBarItems=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return fileNameIsLib(t)?[2,[]]:[2,this._languageService.getNavigationBarItems(t)]}))}))},t.prototype.getFormattingEditsForDocument=function(t,e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){return fileNameIsLib(t)?[2,[]]:[2,this._languageService.getFormattingEditsForDocument(t,e)]}))}))},t.prototype.getFormattingEditsForRange=function(t,e,i,r){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){return fileNameIsLib(t)?[2,[]]:[2,this._languageService.getFormattingEditsForRange(t,e,i,r)]}))}))},t.prototype.getFormattingEditsAfterKeystroke=function(t,e,i,r){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){return fileNameIsLib(t)?[2,[]]:[2,this._languageService.getFormattingEditsAfterKeystroke(t,e,i,r)]}))}))},t.prototype.findRenameLocations=function(t,e,i,r,n){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(o){return fileNameIsLib(t)?[2,void 0]:[2,this._languageService.findRenameLocations(t,e,i,r,n)]}))}))},t.prototype.getRenameInfo=function(t,e,i){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(r){return fileNameIsLib(t)?[2,{canRename:!1,localizedErrorMessage:"Cannot rename in lib file"}]:[2,this._languageService.getRenameInfo(t,e,i)]}))}))},t.prototype.getEmitOutput=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return fileNameIsLib(t)?[2,{outputFiles:[],emitSkipped:!0}]:[2,this._languageService.getEmitOutput(t)]}))}))},t.prototype.getCodeFixesAtPosition=function(t,e,i,r,n){return __awaiter(this,void 0,void 0,(function(){var o;return __generator(this,(function(a){if(fileNameIsLib(t))return[2,[]];o={};try{return[2,this._languageService.getCodeFixesAtPosition(t,e,i,r,n,o)]}catch(t){return[2,[]]}return[2]}))}))},t.prototype.updateExtraLibs=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return this._extraLibs=t,[2]}))}))},t}();export{TypeScriptWorker};export function create(t,e){var i=TypeScriptWorker;if(e.customWorkerPath)if("undefined"==typeof importScripts)console.warn("Monaco is not using webworkers for background tasks, and that is needed to support the customWorkerPath flag");else{importScripts(e.customWorkerPath);var r=self.customTSWorkerFactory;if(!r)throw new Error("The script at "+e.customWorkerPath+" does not add customTSWorkerFactory to self");i=r(TypeScriptWorker,ts,libFileMap)}return new i(t,e)}
//# sourceMappingURL=/sm/9da0f6b028ae3d4c34aea7bcb88892d4cb63390ea39f881fbe0e0024b474dfb4.map