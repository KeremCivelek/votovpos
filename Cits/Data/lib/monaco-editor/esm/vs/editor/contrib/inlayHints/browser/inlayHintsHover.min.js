/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/monaco-editor@0.33.0/esm/vs/editor/contrib/inlayHints/browser/inlayHintsHover.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __decorate=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,r,a):n(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},__param=this&&this.__param||function(e,t){return function(r,o){t(r,o,e)}},__awaiter=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function c(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}l((o=o.apply(e,t||[])).next())}))},__asyncValues=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(r){t[r]=e[r]&&function(t){return new Promise((function(o,n){(function(e,t,r,o){Promise.resolve(o).then((function(t){e({value:t,done:r})}),t)})(o,n,(t=e[r](t)).done,t.value)}))}}};import{AsyncIterableObject}from"../../../../base/common/async.js";import{isEmptyMarkdownString,MarkdownString}from"../../../../base/common/htmlContent.js";import{Position}from"../../../common/core/position.js";import{ModelDecorationInjectedTextOptions}from"../../../common/model/textModel.js";import{HoverForeignElementAnchor}from"../../hover/browser/hoverTypes.js";import{ILanguageService}from"../../../common/languages/language.js";import{ITextModelService}from"../../../common/services/resolverService.js";import{getHover}from"../../hover/browser/getHover.js";import{MarkdownHover,MarkdownHoverParticipant}from"../../hover/browser/markdownHoverParticipant.js";import{RenderedInlayHintLabelPart,InlayHintsController}from"./inlayHintsController.js";import{IConfigurationService}from"../../../../platform/configuration/common/configuration.js";import{IOpenerService}from"../../../../platform/opener/common/opener.js";import{ILanguageFeaturesService}from"../../../common/services/languageFeatures.js";import{localize}from"../../../../nls.js";import*as platform from"../../../../base/common/platform.js";import{asCommandLink}from"./inlayHints.js";class InlayHintsHoverAnchor extends HoverForeignElementAnchor{constructor(e,t){super(10,t,e.item.anchor.range),this.part=e}}let InlayHintsHover=class extends MarkdownHoverParticipant{constructor(e,t,r,o,n,i){super(e,t,r,o,i),this._resolverService=n,this.hoverOrdinal=6}suggestHoverAnchor(e){var t;if(!InlayHintsController.get(this._editor))return null;if(6!==e.target.type)return null;const r=null===(t=e.target.detail.injectedText)||void 0===t?void 0:t.options;return r instanceof ModelDecorationInjectedTextOptions&&r.attachedData instanceof RenderedInlayHintLabelPart?new InlayHintsHoverAnchor(r.attachedData,this):null}computeSync(){return[]}computeAsync(e,t,r){return e instanceof InlayHintsHoverAnchor?new AsyncIterableObject((t=>__awaiter(this,void 0,void 0,(function*(){var o,n;const{part:i}=e;if(yield i.item.resolve(r),r.isCancellationRequested)return;let a,c;if("string"==typeof i.item.hint.tooltip?a=(new MarkdownString).appendText(i.item.hint.tooltip):i.item.hint.tooltip&&(a=i.item.hint.tooltip),a&&t.emitOne(new MarkdownHover(this,e.range,[a],0)),"string"==typeof i.part.tooltip?c=(new MarkdownString).appendText(i.part.tooltip):i.part.tooltip&&(c=i.part.tooltip),c&&t.emitOne(new MarkdownHover(this,e.range,[c],1)),i.part.location||i.part.command){let r;const o="altKey"===this._editor.getOption(70)?platform.isMacintosh?localize("links.navigate.kb.meta.mac","cmd + click"):localize("links.navigate.kb.meta","ctrl + click"):platform.isMacintosh?localize("links.navigate.kb.alt.mac","option + click"):localize("links.navigate.kb.alt","alt + click");i.part.location&&i.part.command?r=(new MarkdownString).appendText(localize("hint.defAndCommand","Go to Definition ({0}), right click for more",o)):i.part.location?r=(new MarkdownString).appendText(localize("hint.def","Go to Definition ({0})",o)):i.part.command&&(r=new MarkdownString(`[${localize("hint.cmd","Execute Command")}](${asCommandLink(i.part.command)} "${i.part.command.title}") (${o})`,{isTrusted:!0})),r&&t.emitOne(new MarkdownHover(this,e.range,[r],1e4))}const l=yield this._resolveInlayHintLabelPartHover(i,r);try{for(var s,m=__asyncValues(l);!(s=yield m.next()).done;){let e=s.value;t.emitOne(e)}}catch(e){o={error:e}}finally{try{s&&!s.done&&(n=m.return)&&(yield n.call(m))}finally{if(o)throw o.error}}})))):AsyncIterableObject.EMPTY}_resolveInlayHintLabelPartHover(e,t){return __awaiter(this,void 0,void 0,(function*(){if(!e.part.location)return AsyncIterableObject.EMPTY;const{uri:r,range:o}=e.part.location,n=yield this._resolverService.createModelReference(r);try{const r=n.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(r)?getHover(this._languageFeaturesService.hoverProvider,r,new Position(o.startLineNumber,o.startColumn),t).filter((e=>!isEmptyMarkdownString(e.hover.contents))).map((t=>new MarkdownHover(this,e.item.anchor.range,t.hover.contents,2+t.ordinal))):AsyncIterableObject.EMPTY}finally{n.dispose()}}))}};InlayHintsHover=__decorate([__param(1,ILanguageService),__param(2,IOpenerService),__param(3,IConfigurationService),__param(4,ITextModelService),__param(5,ILanguageFeaturesService)],InlayHintsHover);export{InlayHintsHover};
//# sourceMappingURL=/sm/193816800c970f454a944f64c21b47c73537cf5dc57cbd90b1f24a6850763078.map