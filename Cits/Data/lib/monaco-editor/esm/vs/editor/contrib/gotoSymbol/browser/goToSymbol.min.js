/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/monaco-editor@0.33.0/esm/vs/editor/contrib/gotoSymbol/browser/goToSymbol.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __awaiter=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))((function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,a)}c((o=o.apply(e,n||[])).next())}))};import{CancellationToken}from"../../../../base/common/cancellation.js";import{onUnexpectedExternalError}from"../../../../base/common/errors.js";import{registerModelAndPositionCommand}from"../../../browser/editorExtensions.js";import{ReferencesModel}from"./referencesModel.js";import{ILanguageFeaturesService}from"../../../common/services/languageFeatures.js";function getLocationLinks(e,n,t,o){const i=t.ordered(e).map((t=>Promise.resolve(o(t,e,n)).then(void 0,(e=>{onUnexpectedExternalError(e)}))));return Promise.all(i).then((e=>{const n=[];for(let t of e)Array.isArray(t)?n.push(...t):t&&n.push(t);return n}))}export function getDefinitionsAtPosition(e,n,t,o){return getLocationLinks(n,t,e,((e,n,t)=>e.provideDefinition(n,t,o)))}export function getDeclarationsAtPosition(e,n,t,o){return getLocationLinks(n,t,e,((e,n,t)=>e.provideDeclaration(n,t,o)))}export function getImplementationsAtPosition(e,n,t,o){return getLocationLinks(n,t,e,((e,n,t)=>e.provideImplementation(n,t,o)))}export function getTypeDefinitionsAtPosition(e,n,t,o){return getLocationLinks(n,t,e,((e,n,t)=>e.provideTypeDefinition(n,t,o)))}export function getReferencesAtPosition(e,n,t,o,i){return getLocationLinks(n,t,e,((e,n,t)=>__awaiter(this,void 0,void 0,(function*(){const r=yield e.provideReferences(n,t,{includeDeclaration:!0},i);if(!o||!r||2!==r.length)return r;const s=yield e.provideReferences(n,t,{includeDeclaration:!1},i);return s&&1===s.length?s:r}))))}function _sortedAndDeduped(e){return __awaiter(this,void 0,void 0,(function*(){const n=yield e(),t=new ReferencesModel(n,""),o=t.references.map((e=>e.link));return t.dispose(),o}))}registerModelAndPositionCommand("_executeDefinitionProvider",((e,n,t)=>{const o=getDefinitionsAtPosition(e.get(ILanguageFeaturesService).definitionProvider,n,t,CancellationToken.None);return _sortedAndDeduped((()=>o))})),registerModelAndPositionCommand("_executeTypeDefinitionProvider",((e,n,t)=>{const o=getTypeDefinitionsAtPosition(e.get(ILanguageFeaturesService).typeDefinitionProvider,n,t,CancellationToken.None);return _sortedAndDeduped((()=>o))})),registerModelAndPositionCommand("_executeDeclarationProvider",((e,n,t)=>{const o=getDeclarationsAtPosition(e.get(ILanguageFeaturesService).declarationProvider,n,t,CancellationToken.None);return _sortedAndDeduped((()=>o))})),registerModelAndPositionCommand("_executeReferenceProvider",((e,n,t)=>{const o=getReferencesAtPosition(e.get(ILanguageFeaturesService).referenceProvider,n,t,!1,CancellationToken.None);return _sortedAndDeduped((()=>o))})),registerModelAndPositionCommand("_executeImplementationProvider",((e,n,t)=>{const o=getImplementationsAtPosition(e.get(ILanguageFeaturesService).implementationProvider,n,t,CancellationToken.None);return _sortedAndDeduped((()=>o))}));
//# sourceMappingURL=/sm/57e84b30f6ce85305e9e6adc64abebace4c1351c296a1000e1c32596e598de01.map