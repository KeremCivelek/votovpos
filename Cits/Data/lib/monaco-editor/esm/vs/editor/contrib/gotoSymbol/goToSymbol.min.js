/**
 * Minified by jsDelivr using Terser v5.7.1.
 * Original file: /npm/monaco-editor@0.27.0/esm/vs/editor/contrib/gotoSymbol/goToSymbol.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __awaiter=this&&this.__awaiter||function(e,n,o,i){return new(o||(o=Promise))((function(t,r){function s(e){try{a(i.next(e))}catch(e){r(e)}}function d(e){try{a(i.throw(e))}catch(e){r(e)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(e){e(n)}))).then(s,d)}a((i=i.apply(e,n||[])).next())}))};import{CancellationToken}from"../../../base/common/cancellation.js";import{onUnexpectedExternalError}from"../../../base/common/errors.js";import{registerModelAndPositionCommand}from"../../browser/editorExtensions.js";import{DefinitionProviderRegistry,ImplementationProviderRegistry,TypeDefinitionProviderRegistry,DeclarationProviderRegistry,ReferenceProviderRegistry}from"../../common/modes.js";import{ReferencesModel}from"./referencesModel.js";function getLocationLinks(e,n,o,i){const t=o.ordered(e).map((o=>Promise.resolve(i(o,e,n)).then(void 0,(e=>{onUnexpectedExternalError(e)}))));return Promise.all(t).then((e=>{const n=[];for(let o of e)Array.isArray(o)?n.push(...o):o&&n.push(o);return n}))}export function getDefinitionsAtPosition(e,n,o){return getLocationLinks(e,n,DefinitionProviderRegistry,((e,n,i)=>e.provideDefinition(n,i,o)))}export function getDeclarationsAtPosition(e,n,o){return getLocationLinks(e,n,DeclarationProviderRegistry,((e,n,i)=>e.provideDeclaration(n,i,o)))}export function getImplementationsAtPosition(e,n,o){return getLocationLinks(e,n,ImplementationProviderRegistry,((e,n,i)=>e.provideImplementation(n,i,o)))}export function getTypeDefinitionsAtPosition(e,n,o){return getLocationLinks(e,n,TypeDefinitionProviderRegistry,((e,n,i)=>e.provideTypeDefinition(n,i,o)))}export function getReferencesAtPosition(e,n,o,i){return getLocationLinks(e,n,ReferenceProviderRegistry,((e,n,t)=>__awaiter(this,void 0,void 0,(function*(){const r=yield e.provideReferences(n,t,{includeDeclaration:!0},i);if(!o||!r||2!==r.length)return r;const s=yield e.provideReferences(n,t,{includeDeclaration:!1},i);return s&&1===s.length?s:r}))))}function _sortedAndDeduped(e){return __awaiter(this,void 0,void 0,(function*(){const n=yield e(),o=new ReferencesModel(n,""),i=o.references.map((e=>e.link));return o.dispose(),i}))}registerModelAndPositionCommand("_executeDefinitionProvider",((e,n)=>_sortedAndDeduped((()=>getDefinitionsAtPosition(e,n,CancellationToken.None))))),registerModelAndPositionCommand("_executeDeclarationProvider",((e,n)=>_sortedAndDeduped((()=>getDeclarationsAtPosition(e,n,CancellationToken.None))))),registerModelAndPositionCommand("_executeImplementationProvider",((e,n)=>_sortedAndDeduped((()=>getImplementationsAtPosition(e,n,CancellationToken.None))))),registerModelAndPositionCommand("_executeTypeDefinitionProvider",((e,n)=>_sortedAndDeduped((()=>getTypeDefinitionsAtPosition(e,n,CancellationToken.None))))),registerModelAndPositionCommand("_executeReferenceProvider",((e,n)=>_sortedAndDeduped((()=>getReferencesAtPosition(e,n,!1,CancellationToken.None)))));
//# sourceMappingURL=/sm/9f2fd40d37a2cd405ecb408052454d00f5eb89f807a01bd3d6feadddd82e05b3.map