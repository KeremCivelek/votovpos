/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/monaco-editor@0.33.0/esm/vs/editor/contrib/inlayHints/browser/inlayHints.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __awaiter=this&&this.__awaiter||function(t,e,o,i){return new(o||(o=Promise))((function(n,s){function r(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(r,a)}l((i=i.apply(t,e||[])).next())}))};import{CancellationError,onUnexpectedExternalError}from"../../../../base/common/errors.js";import{DisposableStore}from"../../../../base/common/lifecycle.js";import{Position}from"../../../common/core/position.js";import{Range}from"../../../common/core/range.js";import{Schemas}from"../../../../base/common/network.js";import{URI}from"../../../../base/common/uri.js";export class InlayHintAnchor{constructor(t,e){this.range=t,this.direction=e}}export class InlayHintItem{constructor(t,e,o){this.hint=t,this.anchor=e,this.provider=o,this._isResolved=!1}with(t){const e=new InlayHintItem(this.hint,t.anchor,this.provider);return e._isResolved=this._isResolved,e._currentResolve=this._currentResolve,e}resolve(t){return __awaiter(this,void 0,void 0,(function*(){if("function"==typeof this.provider.resolveInlayHint){if(this._currentResolve){if(yield this._currentResolve,t.isCancellationRequested)return;return this.resolve(t)}this._isResolved||(this._currentResolve=this._doResolve(t).finally((()=>this._currentResolve=void 0))),yield this._currentResolve}}))}_doResolve(t){var e,o;return __awaiter(this,void 0,void 0,(function*(){try{const i=yield Promise.resolve(this.provider.resolveInlayHint(this.hint,t));this.hint.tooltip=null!==(e=null==i?void 0:i.tooltip)&&void 0!==e?e:this.hint.tooltip,this.hint.label=null!==(o=null==i?void 0:i.label)&&void 0!==o?o:this.hint.label,this._isResolved=!0}catch(t){onUnexpectedExternalError(t),this._isResolved=!1}}))}}export class InlayHintsFragments{constructor(t,e,o){this._disposables=new DisposableStore,this.ranges=t,this.provider=new Set;const i=[];for(const[t,n]of e){this._disposables.add(t),this.provider.add(n);for(const e of t.hints){let t=o.validatePosition(e.position),s="before";const r=InlayHintsFragments._getRangeAtPosition(o,t);let a;r.getStartPosition().isBefore(t)?(a=Range.fromPositions(r.getStartPosition(),t),s="after"):(a=Range.fromPositions(t,r.getEndPosition()),s="before"),i.push(new InlayHintItem(e,new InlayHintAnchor(a,s),n))}}this.items=i.sort(((t,e)=>Position.compare(t.hint.position,e.hint.position)))}static create(t,e,o,i){return __awaiter(this,void 0,void 0,(function*(){const n=[],s=t.ordered(e).reverse().map((t=>o.map((o=>__awaiter(this,void 0,void 0,(function*(){try{const s=yield t.provideInlayHints(e,o,i);(null==s?void 0:s.hints.length)&&n.push([s,t])}catch(t){onUnexpectedExternalError(t)}}))))));if(yield Promise.all(s.flat()),i.isCancellationRequested||e.isDisposed())throw new CancellationError;return new InlayHintsFragments(o,n,e)}))}dispose(){this._disposables.dispose()}static _getRangeAtPosition(t,e){const o=e.lineNumber,i=t.getWordAtPosition(e);if(i)return new Range(o,i.startColumn,o,i.endColumn);t.tokenizeIfCheap(o);const n=t.getLineTokens(o),s=e.column-1,r=n.findTokenIndexAtOffset(s);let a=n.getStartOffset(r),l=n.getEndOffset(r);return l-a==1&&(a===s&&r>1?(a=n.getStartOffset(r-1),l=n.getEndOffset(r-1)):l===s&&r<n.getCount()-1&&(a=n.getStartOffset(r+1),l=n.getEndOffset(r+1))),new Range(o,a+1,o,l+1)}}export function asCommandLink(t){return URI.from({scheme:Schemas.command,path:t.id,query:t.arguments&&encodeURIComponent(JSON.stringify(t.arguments))}).toString()}
//# sourceMappingURL=/sm/5db8d9d5dba03f3f172fb58ef4e1e0a6a795ebd701ba18c3e055d6d4a6afb532.map