/**
 * Minified by jsDelivr using Terser v5.7.1.
 * Original file: /npm/monaco-editor@0.27.0/esm/vs/editor/browser/core/markdownRenderer.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var _a,__decorate=this&&this.__decorate||function(e,o,t,r){var n,i=arguments.length,s=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,o,t,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(o,t,s):n(o,t))||s);return i>3&&s&&Object.defineProperty(o,t,s),s},__param=this&&this.__param||function(e,o){return function(t,r){o(t,r,e)}},__awaiter=this&&this.__awaiter||function(e,o,t,r){return new(t||(t=Promise))((function(n,i){function s(e){try{d(r.next(e))}catch(e){i(e)}}function a(e){try{d(r.throw(e))}catch(e){i(e)}}function d(e){var o;e.done?n(e.value):(o=e.value,o instanceof t?o:new t((function(e){e(o)}))).then(s,a)}d((r=r.apply(e,o||[])).next())}))};import{renderMarkdown}from"../../../base/browser/markdownRenderer.js";import{IOpenerService}from"../../../platform/opener/common/opener.js";import{IModeService}from"../../common/services/modeService.js";import{onUnexpectedError}from"../../../base/common/errors.js";import{tokenizeToString}from"../../common/modes/textToHtmlTokenizer.js";import{Emitter}from"../../../base/common/event.js";import{DisposableStore}from"../../../base/common/lifecycle.js";import{TokenizationRegistry}from"../../common/modes.js";let MarkdownRenderer=class e{constructor(e,o,t){this._options=e,this._modeService=o,this._openerService=t,this._onDidRenderAsync=new Emitter,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,o,t){const r=new DisposableStore;let n;return n=e?renderMarkdown(e,Object.assign(Object.assign({},this._getRenderOptions(e,r)),o),t):document.createElement("span"),{element:n,dispose:()=>r.dispose()}}_getRenderOptions(o,t){return{baseUrl:this._options.baseUrl,codeBlockRenderer:(o,t)=>__awaiter(this,void 0,void 0,(function*(){var r,n,i,s;let a;o?a=this._modeService.getModeIdForLanguageName(o):this._options.editor&&(a=null===(r=this._options.editor.getModel())||void 0===r?void 0:r.getLanguageIdentifier().language),a||(a="plaintext"),this._modeService.triggerMode(a);const d=null!==(n=yield TokenizationRegistry.getPromise(a))&&void 0!==n?n:void 0,c=document.createElement("span");c.innerHTML=null!==(s=null===(i=e._ttpTokenizer)||void 0===i?void 0:i.createHTML(t,d))&&void 0!==s?s:tokenizeToString(t,d);let m=this._options.codeBlockFontFamily;return this._options.editor&&(m=this._options.editor.getOption(41).fontFamily),m&&(c.style.fontFamily=m),c})),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:e=>this._openerService.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:o.isTrusted}).catch(onUnexpectedError),disposeables:t}}}};MarkdownRenderer._ttpTokenizer=null===(_a=window.trustedTypes)||void 0===_a?void 0:_a.createPolicy("tokenizeToString",{createHTML:(e,o)=>tokenizeToString(e,o)}),MarkdownRenderer=__decorate([__param(1,IModeService),__param(2,IOpenerService)],MarkdownRenderer);export{MarkdownRenderer};
//# sourceMappingURL=/sm/e4719c50bde55fcba1942553a2080080a80f94e4bc4bcf9efd48700bb7b92f97.map