/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/monaco-editor@0.33.0/esm/vs/editor/browser/editorExtensions.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as nls from"../../nls.js";import{URI}from"../../base/common/uri.js";import{ICodeEditorService}from"./services/codeEditorService.js";import{Position}from"../common/core/position.js";import{IModelService}from"../common/services/model.js";import{ITextModelService}from"../common/services/resolverService.js";import{MenuId,MenuRegistry}from"../../platform/actions/common/actions.js";import{CommandsRegistry}from"../../platform/commands/common/commands.js";import{ContextKeyExpr,IContextKeyService}from"../../platform/contextkey/common/contextkey.js";import{IInstantiationService}from"../../platform/instantiation/common/instantiation.js";import{KeybindingsRegistry}from"../../platform/keybinding/common/keybindingsRegistry.js";import{Registry}from"../../platform/registry/common/platform.js";import{ITelemetryService}from"../../platform/telemetry/common/telemetry.js";import{withNullAsUndefined,assertType}from"../../base/common/types.js";import{ILogService}from"../../platform/log/common/log.js";export class Command{constructor(t){this.id=t.id,this.precondition=t.precondition,this._kbOpts=t.kbOpts,this._menuOpts=t.menuOpts,this._description=t.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const t=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const i of t){let t=i.kbExpr;this.precondition&&(t=t?ContextKeyExpr.and(t,this.precondition):this.precondition);const o={id:this.id,weight:i.weight,args:i.args,when:t,primary:i.primary,secondary:i.secondary,win:i.win,linux:i.linux,mac:i.mac};KeybindingsRegistry.registerKeybindingRule(o)}}CommandsRegistry.registerCommand({id:this.id,handler:(t,i)=>this.runCommand(t,i),description:this._description})}_registerMenuItem(t){MenuRegistry.appendMenuItem(t.menuId,{group:t.group,command:{id:this.id,title:t.title,icon:t.icon,precondition:this.precondition},when:t.when,order:t.order})}}export class MultiCommand extends Command{constructor(){super(...arguments),this._implementations=[]}addImplementation(t,i,o){return this._implementations.push({priority:t,name:i,implementation:o}),this._implementations.sort(((t,i)=>i.priority-t.priority)),{dispose:()=>{for(let t=0;t<this._implementations.length;t++)if(this._implementations[t].implementation===o)return void this._implementations.splice(t,1)}}}runCommand(t,i){const o=t.get(ILogService);o.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const e of this._implementations){const n=e.implementation(t,i);if(n){if(o.trace(`Command '${this.id}' was handled by '${e.name}'.`),"boolean"==typeof n)return;return n}}o.trace(`The Command '${this.id}' was not handled by any implementation.`)}}export class ProxyCommand extends Command{constructor(t,i){super(i),this.command=t}runCommand(t,i){return this.command.runCommand(t,i)}}export class EditorCommand extends Command{static bindToContribution(t){return class extends EditorCommand{constructor(t){super(t),this._callback=t.handler}runEditorCommand(i,o,e){const n=t(o);n&&this._callback(n,e)}}}runCommand(t,i){const o=t.get(ICodeEditorService),e=o.getFocusedCodeEditor()||o.getActiveCodeEditor();if(e)return e.invokeWithinContext((t=>{if(t.get(IContextKeyService).contextMatchesRules(withNullAsUndefined(this.precondition)))return this.runEditorCommand(t,e,i)}))}}export class EditorAction extends EditorCommand{constructor(t){super(EditorAction.convertOptions(t)),this.label=t.label,this.alias=t.alias}static convertOptions(t){let i;function o(i){return i.menuId||(i.menuId=MenuId.EditorContext),i.title||(i.title=t.label),i.when=ContextKeyExpr.and(t.precondition,i.when),i}return i=Array.isArray(t.menuOpts)?t.menuOpts:t.menuOpts?[t.menuOpts]:[],Array.isArray(t.contextMenuOpts)?i.push(...t.contextMenuOpts.map(o)):t.contextMenuOpts&&i.push(o(t.contextMenuOpts)),t.menuOpts=i,t}runEditorCommand(t,i,o){return this.reportTelemetry(t,i),this.run(t,i,o||{})}reportTelemetry(t,i){t.get(ITelemetryService).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}export class MultiEditorAction extends EditorAction{constructor(){super(...arguments),this._implementations=[]}addImplementation(t,i){return this._implementations.push([t,i]),this._implementations.sort(((t,i)=>i[0]-t[0])),{dispose:()=>{for(let t=0;t<this._implementations.length;t++)if(this._implementations[t][1]===i)return void this._implementations.splice(t,1)}}}run(t,i,o){for(const e of this._implementations){const n=e[1](t,i,o);if(n){if("boolean"==typeof n)return;return n}}}}export function registerModelAndPositionCommand(t,i){CommandsRegistry.registerCommand(t,(function(t,...o){const e=t.get(IInstantiationService),[n,r]=o;assertType(URI.isUri(n)),assertType(Position.isIPosition(r));const s=t.get(IModelService).getModel(n);if(s){const t=Position.lift(r);return e.invokeFunction(i,s,t,...o.slice(2))}return t.get(ITextModelService).createModelReference(n).then((t=>new Promise(((n,s)=>{try{n(e.invokeFunction(i,t.object.textEditorModel,Position.lift(r),o.slice(2)))}catch(t){s(t)}})).finally((()=>{t.dispose()}))))}))}export function registerEditorCommand(t){return EditorContributionRegistry.INSTANCE.registerEditorCommand(t),t}export function registerEditorAction(t){const i=new t;return EditorContributionRegistry.INSTANCE.registerEditorAction(i),i}export function registerMultiEditorAction(t){return EditorContributionRegistry.INSTANCE.registerEditorAction(t),t}export function registerInstantiatedEditorAction(t){EditorContributionRegistry.INSTANCE.registerEditorAction(t)}export function registerEditorContribution(t,i){EditorContributionRegistry.INSTANCE.registerEditorContribution(t,i)}export var EditorExtensionsRegistry;!function(t){t.getEditorCommand=function(t){return EditorContributionRegistry.INSTANCE.getEditorCommand(t)},t.getEditorActions=function(){return EditorContributionRegistry.INSTANCE.getEditorActions()},t.getEditorContributions=function(){return EditorContributionRegistry.INSTANCE.getEditorContributions()},t.getSomeEditorContributions=function(t){return EditorContributionRegistry.INSTANCE.getEditorContributions().filter((i=>t.indexOf(i.id)>=0))},t.getDiffEditorContributions=function(){return EditorContributionRegistry.INSTANCE.getDiffEditorContributions()}}(EditorExtensionsRegistry||(EditorExtensionsRegistry={}));const Extensions={EditorCommonContributions:"editor.contributions"};class EditorContributionRegistry{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(t,i){this.editorContributions.push({id:t,ctor:i})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(t){t.register(),this.editorActions.push(t)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(t){t.register(),this.editorCommands[t.id]=t}getEditorCommand(t){return this.editorCommands[t]||null}}function registerCommand(t){return t.register(),t}EditorContributionRegistry.INSTANCE=new EditorContributionRegistry,Registry.add(Extensions.EditorCommonContributions,EditorContributionRegistry.INSTANCE);export const UndoCommand=registerCommand(new MultiCommand({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:MenuId.MenubarEditMenu,group:"1_do",title:nls.localize({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:MenuId.CommandPalette,group:"",title:nls.localize("undo","Undo"),order:1}]}));registerCommand(new ProxyCommand(UndoCommand,{id:"default:undo",precondition:void 0}));export const RedoCommand=registerCommand(new MultiCommand({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:MenuId.MenubarEditMenu,group:"1_do",title:nls.localize({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:MenuId.CommandPalette,group:"",title:nls.localize("redo","Redo"),order:1}]}));registerCommand(new ProxyCommand(RedoCommand,{id:"default:redo",precondition:void 0}));export const SelectAllCommand=registerCommand(new MultiCommand({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:MenuId.MenubarSelectionMenu,group:"1_basic",title:nls.localize({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:MenuId.CommandPalette,group:"",title:nls.localize("selectAll","Select All"),order:1}]}));
//# sourceMappingURL=/sm/98cc3a604ff0c72c78154c9522a5d7410261e254c2639c8a694bd28e99a5b561.map