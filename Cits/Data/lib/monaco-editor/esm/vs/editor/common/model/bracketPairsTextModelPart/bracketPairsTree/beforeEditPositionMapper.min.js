/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/monaco-editor@0.33.0/esm/vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/beforeEditPositionMapper.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{lengthAdd,lengthDiffNonNegative,lengthLessThanEqual,lengthToObj,toLength}from"./length.js";export class TextEditInfo{constructor(t,e,n){this.startOffset=t,this.endOffset=e,this.newLength=n}}export class BeforeEditPositionMapper{constructor(t,e){this.documentLength=e,this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=t.map((t=>TextEditInfoCache.from(t)))}getOffsetBeforeChange(t){return this.adjustNextEdit(t),this.translateCurToOld(t)}getDistanceToNextChange(t){this.adjustNextEdit(t);const e=this.edits[this.nextEditIdx],n=e?this.translateOldToCur(e.offsetObj):this.documentLength;return lengthDiffNonNegative(t,n)}translateOldToCur(t){return t.lineCount===this.deltaLineIdxInOld?toLength(t.lineCount+this.deltaOldToNewLineCount,t.columnCount+this.deltaOldToNewColumnCount):toLength(t.lineCount+this.deltaOldToNewLineCount,t.columnCount)}translateCurToOld(t){const e=lengthToObj(t);return e.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?toLength(e.lineCount-this.deltaOldToNewLineCount,e.columnCount-this.deltaOldToNewColumnCount):toLength(e.lineCount-this.deltaOldToNewLineCount,e.columnCount)}adjustNextEdit(t){for(;this.nextEditIdx<this.edits.length;){const e=this.edits[this.nextEditIdx],n=this.translateOldToCur(e.endOffsetAfterObj);if(!lengthLessThanEqual(n,t))break;{this.nextEditIdx++;const t=lengthToObj(n),o=lengthToObj(this.translateOldToCur(e.endOffsetBeforeObj)),s=t.lineCount-o.lineCount;this.deltaOldToNewLineCount+=s;const i=this.deltaLineIdxInOld===e.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=t.columnCount-o.columnCount;this.deltaOldToNewColumnCount=i+l,this.deltaLineIdxInOld=e.endOffsetBeforeObj.lineCount}}}}class TextEditInfoCache{constructor(t,e,n){this.endOffsetBeforeObj=lengthToObj(e),this.endOffsetAfterObj=lengthToObj(lengthAdd(t,n)),this.offsetObj=lengthToObj(t)}static from(t){return new TextEditInfoCache(t.startOffset,t.endOffset,t.newLength)}}
//# sourceMappingURL=/sm/e66bd209e40a2a676fdbeb94b65c69cf8711aa9864c15990facac3490e99cdc6.map