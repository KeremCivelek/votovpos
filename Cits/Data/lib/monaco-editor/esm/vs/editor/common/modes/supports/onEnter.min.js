/**
 * Minified by jsDelivr using Terser v5.7.1.
 * Original file: /npm/monaco-editor@0.27.0/esm/vs/editor/common/modes/supports/onEnter.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{onUnexpectedError}from"../../../../base/common/errors.js";import*as strings from"../../../../base/common/strings.js";import{IndentAction}from"../languageConfiguration.js";export class OnEnterSupport{constructor(e){(e=e||{}).brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach((e=>{const t=OnEnterSupport._createOpenBracketRegExp(e[0]),r=OnEnterSupport._createCloseBracketRegExp(e[1]);t&&r&&this._brackets.push({open:e[0],openRegExp:t,close:e[1],closeRegExp:r})})),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,r,n){if(e>=3)for(let e=0,s=this._regExpRules.length;e<s;e++){let s=this._regExpRules[e];if([{reg:s.beforeText,text:r},{reg:s.afterText,text:n},{reg:s.previousLineText,text:t}].every((e=>!e.reg||(e.reg.lastIndex=0,e.reg.test(e.text)))))return s.action}if(e>=2&&r.length>0&&n.length>0)for(let e=0,t=this._brackets.length;e<t;e++){let t=this._brackets[e];if(t.openRegExp.test(r)&&t.closeRegExp.test(n))return{indentAction:IndentAction.IndentOutdent}}if(e>=2&&r.length>0)for(let e=0,t=this._brackets.length;e<t;e++){if(this._brackets[e].openRegExp.test(r))return{indentAction:IndentAction.Indent}}return null}static _createOpenBracketRegExp(e){let t=strings.escapeRegExpCharacters(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",OnEnterSupport._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=strings.escapeRegExpCharacters(e);return/\B/.test(t.charAt(t.length-1))||(t+="\\b"),t="^\\s*"+t,OnEnterSupport._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(e){return onUnexpectedError(e),null}}}
//# sourceMappingURL=/sm/82f9bd2dd3bda7baccbc999c0c001de40faddcd49a7ec346c0ba0e3ee6af592c.map