/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/monaco-editor@0.33.0/esm/vs/base/common/filters.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{LRUCache}from"./map.js";import*as strings from"./strings.js";export function or(...e){return function(t,r){for(let n=0,o=e.length;n<o;n++){const o=e[n](t,r);if(o)return o}return null}}export const matchesStrictPrefix=_matchesPrefix.bind(void 0,!1);export const matchesPrefix=_matchesPrefix.bind(void 0,!0);function _matchesPrefix(e,t,r){if(!r||r.length<t.length)return null;let n;return n=e?strings.startsWithIgnoreCase(r,t):0===r.indexOf(t),n?t.length>0?[{start:0,end:t.length}]:[]:null}export function matchesContiguousSubString(e,t){const r=t.toLowerCase().indexOf(e.toLowerCase());return-1===r?null:[{start:r,end:r+e.length}]}export function matchesSubString(e,t){return _matchesSubString(e.toLowerCase(),t.toLowerCase(),0,0)}function _matchesSubString(e,t,r,n){if(r===e.length)return[];if(n===t.length)return null;if(e[r]===t[n]){let o=null;return(o=_matchesSubString(e,t,r+1,n+1))?join({start:n,end:n+1},o):null}return _matchesSubString(e,t,r,n+1)}function isLower(e){return 97<=e&&e<=122}export function isUpper(e){return 65<=e&&e<=90}function isNumber(e){return 48<=e&&e<=57}function isWhitespace(e){return 32===e||9===e||10===e||13===e}const wordSeparators=new Set;function isWordSeparator(e){return isWhitespace(e)||wordSeparators.has(e)}function charactersMatch(e,t){return e===t||isWordSeparator(e)&&isWordSeparator(t)}function isAlphanumeric(e){return isLower(e)||isUpper(e)||isNumber(e)}function join(e,t){return 0===t.length?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function nextAnchor(e,t){for(let r=t;r<e.length;r++){const t=e.charCodeAt(r);if(isUpper(t)||isNumber(t)||r>0&&!isAlphanumeric(e.charCodeAt(r-1)))return r}return e.length}function _matchesCamelCase(e,t,r,n){if(r===e.length)return[];if(n===t.length)return null;if(e[r]!==t[n].toLowerCase())return null;{let o=null,s=n+1;for(o=_matchesCamelCase(e,t,r+1,n+1);!o&&(s=nextAnchor(t,s))<t.length;)o=_matchesCamelCase(e,t,r+1,s),s++;return null===o?null:join({start:n,end:n+1},o)}}function analyzeCamelCaseWord(e){let t=0,r=0,n=0,o=0,s=0;for(let i=0;i<e.length;i++)s=e.charCodeAt(i),isUpper(s)&&t++,isLower(s)&&r++,isAlphanumeric(s)&&n++,isNumber(s)&&o++;return{upperPercent:t/e.length,lowerPercent:r/e.length,alphaPercent:n/e.length,numericPercent:o/e.length}}function isUpperCaseWord(e){const{upperPercent:t,lowerPercent:r}=e;return 0===r&&t>.6}function isCamelCaseWord(e){const{upperPercent:t,lowerPercent:r,alphaPercent:n,numericPercent:o}=e;return r>.2&&t<.8&&n>.6&&o<.2}function isCamelCasePattern(e){let t=0,r=0,n=0,o=0;for(let s=0;s<e.length;s++)n=e.charCodeAt(s),isUpper(n)&&t++,isLower(n)&&r++,isWhitespace(n)&&o++;return 0!==t&&0!==r||0!==o?t<=5:e.length<=30}"()[]{}<>`'\"-/;:,.?!".split("").forEach((e=>wordSeparators.add(e.charCodeAt(0))));export function matchesCamelCase(e,t){if(!t)return null;if(0===(t=t.trim()).length)return null;if(!isCamelCasePattern(e))return null;if(t.length>60)return null;const r=analyzeCamelCaseWord(t);if(!isCamelCaseWord(r)){if(!isUpperCaseWord(r))return null;t=t.toLowerCase()}let n=null,o=0;for(e=e.toLowerCase();o<t.length&&null===(n=_matchesCamelCase(e,t,0,o));)o=nextAnchor(t,o+1);return n}export function matchesWords(e,t,r=!1){if(!t||0===t.length)return null;let n=null,o=0;for(e=e.toLowerCase(),t=t.toLowerCase();o<t.length&&null===(n=_matchesWords(e,t,0,o,r));)o=nextWord(t,o+1);return n}function _matchesWords(e,t,r,n,o){if(r===e.length)return[];if(n===t.length)return null;if(charactersMatch(e.charCodeAt(r),t.charCodeAt(n))){let s=null,i=n+1;if(s=_matchesWords(e,t,r+1,n+1,o),!o)for(;!s&&(i=nextWord(t,i))<t.length;)s=_matchesWords(e,t,r+1,i,o),i++;return null===s?null:join({start:n,end:n+1},s)}return null}function nextWord(e,t){for(let r=t;r<e.length;r++)if(isWordSeparator(e.charCodeAt(r))||r>0&&isWordSeparator(e.charCodeAt(r-1)))return r;return e.length}const fuzzyContiguousFilter=or(matchesPrefix,matchesCamelCase,matchesContiguousSubString),fuzzySeparateFilter=or(matchesPrefix,matchesCamelCase,matchesSubString),fuzzyRegExpCache=new LRUCache(1e4);export function matchesFuzzy(e,t,r=!1){if("string"!=typeof e||"string"!=typeof t)return null;let n=fuzzyRegExpCache.get(e);n||(n=new RegExp(strings.convertSimple2RegExpPattern(e),"i"),fuzzyRegExpCache.set(e,n));const o=n.exec(t);return o?[{start:o.index,end:o.index+o[0].length}]:r?fuzzySeparateFilter(e,t):fuzzyContiguousFilter(e,t)}export function anyScore(e,t,r,n,o,s){const i=Math.min(13,e.length);for(;r<i;r++){const i=fuzzyScore(e,t,r,n,o,s,!1);if(i)return i}return[0,s]}export function createMatches(e){if(void 0===e)return[];const t=[],r=e[1];for(let n=e.length-1;n>1;n--){const o=e[n]+r,s=t[t.length-1];s&&s.end===o?s.end=o+1:t.push({start:o,end:o+1})}return t}const _maxLen=128;function initTable(){const e=[],t=[];for(let e=0;e<=128;e++)t[e]=0;for(let r=0;r<=128;r++)e.push(t.slice(0));return e}function initArr(e){const t=[];for(let r=0;r<=e;r++)t[r]=0;return t}const _minWordMatchPos=initArr(256),_maxWordMatchPos=initArr(256),_diag=initTable(),_table=initTable(),_arrows=initTable(),_debug=!1;function printTable(e,t,r,n,o){function s(e,t,r=" "){for(;e.length<t;)e=r+e;return e}let i=` |   |${n.split("").map((e=>s(e,3))).join("|")}\n`;for(let n=0;n<=r;n++)i+=0===n?" |":`${t[n-1]}|`,i+=e[n].slice(0,o+1).map((e=>s(e.toString(),3))).join("|")+"\n";return i}function printTables(e,t,r,n){e=e.substr(t),r=r.substr(n),console.log(printTable(_table,e,e.length,r,r.length)),console.log(printTable(_arrows,e,e.length,r,r.length)),console.log(printTable(_diag,e,e.length,r,r.length))}function isSeparatorAtPos(e,t){if(t<0||t>=e.length)return!1;const r=e.codePointAt(t);switch(r){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 40:case 91:return!0;case void 0:return!1;default:return!!strings.isEmojiImprecise(r)}}function isWhitespaceAtPos(e,t){if(t<0||t>=e.length)return!1;switch(e.charCodeAt(t)){case 32:case 9:return!0;default:return!1}}function isUpperCaseAtPos(e,t,r){return t[e]!==r[e]}export function isPatternInWord(e,t,r,n,o,s,i=!1){for(;t<r&&o<s;)e[t]===n[o]&&(i&&(_minWordMatchPos[t]=o),t+=1),o+=1;return t===r}export var FuzzyScore;!function(e){e.Default=[-100,0],e.isDefault=function(e){return!e||2===e.length&&-100===e[0]&&0===e[1]}}(FuzzyScore||(FuzzyScore={}));export function fuzzyScore(e,t,r,n,o,s,i){const a=e.length>128?128:e.length,u=n.length>128?128:n.length;if(r>=a||s>=u||a-r>u-s)return;if(!isPatternInWord(t,r,a,o,s,u,!0))return;_fillInMaxWordMatchPos(a,u,r,s,t,o);let l=1,c=1,f=r,h=s;const p=[!1];for(l=1,f=r;f<a;l++,f++){const i=_minWordMatchPos[f],g=_maxWordMatchPos[f],d=f+1<a?_maxWordMatchPos[f+1]:u;for(c=i-s+1,h=i;h<d;c++,h++){let a=Number.MIN_SAFE_INTEGER,d=!1;h<=g&&(a=_doScore(e,t,f,r,n,o,h,u,s,0===_diag[l-1][c-1],p));let m=0;a!==Number.MAX_SAFE_INTEGER&&(d=!0,m=a+_table[l-1][c-1]);const C=h>i,_=C?_table[l][c-1]+(_diag[l][c-1]>0?-5:0):0,S=h>i+1&&_diag[l][c-1]>0,P=S?_table[l][c-2]+(_diag[l][c-2]>0?-5:0):0;if(S&&(!C||P>=_)&&(!d||P>=m))_table[l][c]=P,_arrows[l][c]=3,_diag[l][c]=0;else if(C&&(!d||_>=m))_table[l][c]=_,_arrows[l][c]=2,_diag[l][c]=0;else{if(!d)throw new Error("not possible");_table[l][c]=m,_arrows[l][c]=1,_diag[l][c]=_diag[l-1][c-1]+1}}}if(!p[0]&&!i)return;l--,c--;const g=[_table[l][c],s];let d=0,m=0;for(;l>=1;){let e=c;do{const t=_arrows[l][e];if(3===t)e-=2;else{if(2!==t)break;e-=1}}while(e>=1);d>1&&t[r+l-1]===o[s+c-1]&&!isUpperCaseAtPos(e+s-1,n,o)&&d+1>_diag[l][e]&&(e=c),e===c?d++:d=1,m||(m=e),l--,c=e-1,g.push(c)}u===a&&(g[0]+=2);const C=m-a;return g[0]-=C,g}function _fillInMaxWordMatchPos(e,t,r,n,o,s){let i=e-1,a=t-1;for(;i>=r&&a>=n;)o[i]===s[a]&&(_maxWordMatchPos[i]=a,i--),a--}function _doScore(e,t,r,n,o,s,i,a,u,l,c){if(t[r]!==s[i])return Number.MIN_SAFE_INTEGER;let f=1,h=!1;return i===r-n?f=e[r]===o[i]?7:5:!isUpperCaseAtPos(i,o,s)||0!==i&&isUpperCaseAtPos(i-1,o,s)?!isSeparatorAtPos(s,i)||0!==i&&isSeparatorAtPos(s,i-1)?(isSeparatorAtPos(s,i-1)||isWhitespaceAtPos(s,i-1))&&(f=5,h=!0):f=5:(f=e[r]===o[i]?7:5,h=!0),f>1&&r===n&&(c[0]=!0),h||(h=isUpperCaseAtPos(i,o,s)||isSeparatorAtPos(s,i-1)||isWhitespaceAtPos(s,i-1)),r===n?i>u&&(f-=h?3:5):f+=l?h?2:0:h?0:1,i+1===a&&(f-=h?3:5),f}export function fuzzyScoreGracefulAggressive(e,t,r,n,o,s,i){return fuzzyScoreWithPermutations(e,t,r,n,o,s,!0,i)}function fuzzyScoreWithPermutations(e,t,r,n,o,s,i,a){let u=fuzzyScore(e,t,r,n,o,s,a);if(u&&!i)return u;if(e.length>=3){const t=Math.min(7,e.length-1);for(let i=r+1;i<t;i++){const t=nextTypoPermutation(e,i);if(t){const e=fuzzyScore(t,t.toLowerCase(),r,n,o,s,a);e&&(e[0]-=3,(!u||e[0]>u[0])&&(u=e))}}}return u}function nextTypoPermutation(e,t){if(t+1>=e.length)return;const r=e[t],n=e[t+1];return r!==n?e.slice(0,t)+n+r+e.slice(t+2):void 0}
//# sourceMappingURL=/sm/efea94c6d2b34d96d9e46f19c07683f6ba8964dc72a6108e3d4bdcca2eeb0520.map