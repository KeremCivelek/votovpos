/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/monaco-editor@0.33.0/esm/vs/base/browser/globalMouseMoveMonitor.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as dom from"./dom.js";import{IframeUtils}from"./iframe.js";import{StandardMouseEvent}from"./mouseEvent.js";import{DisposableStore}from"../common/lifecycle.js";import{isIOS}from"../common/platform.js";export function standardMouseMoveMerger(o,t){let e=new StandardMouseEvent(t);return e.preventDefault(),{leftButton:e.leftButton,buttons:e.buttons,posx:e.posx,posy:e.posy}}export class GlobalMouseMoveMonitor{constructor(){this._hooks=new DisposableStore,this._mouseMoveEventMerger=null,this._mouseMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(o,t){if(!this.isMonitoring())return;this._hooks.clear(),this._mouseMoveEventMerger=null,this._mouseMoveCallback=null;const e=this._onStopCallback;this._onStopCallback=null,o&&e&&e(t)}isMonitoring(){return!!this._mouseMoveEventMerger}startMonitoring(o,t,e,s,i){if(this.isMonitoring())return;this._mouseMoveEventMerger=e,this._mouseMoveCallback=s,this._onStopCallback=i;const n=IframeUtils.getSameOriginWindowChain(),r=isIOS?"pointermove":"mousemove",a=n.map((o=>o.window.document)),l=dom.getShadowRoot(o);l&&a.unshift(l);for(const o of a)this._hooks.add(dom.addDisposableThrottledListener(o,r,(o=>{o.buttons===t?this._mouseMoveCallback(o):this.stopMonitoring(!0)}),((o,t)=>this._mouseMoveEventMerger(o,t)))),this._hooks.add(dom.addDisposableListener(o,"mouseup",(o=>this.stopMonitoring(!0))));if(IframeUtils.hasDifferentOriginAncestor()){let o=n[n.length-1];this._hooks.add(dom.addDisposableListener(o.window.document,"mouseout",(o=>{"html"===new StandardMouseEvent(o).target.tagName.toLowerCase()&&this.stopMonitoring(!0)}))),this._hooks.add(dom.addDisposableListener(o.window.document,"mouseover",(o=>{"html"===new StandardMouseEvent(o).target.tagName.toLowerCase()&&this.stopMonitoring(!0)}))),this._hooks.add(dom.addDisposableListener(o.window.document.body,"mouseleave",(o=>{this.stopMonitoring(!0)})))}}}
//# sourceMappingURL=/sm/7d920b219d938071e267078754ba1fa55dc31834789106d04c9859b6834f9a72.map