/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/monaco-editor@0.33.0/esm/vs/base/browser/ui/iconLabel/iconLabelHover.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __awaiter=this&&this.__awaiter||function(e,o,t,i){return new(t||(t=Promise))((function(n,s){function a(e){try{d(i.next(e))}catch(e){s(e)}}function r(e){try{d(i.throw(e))}catch(e){s(e)}}function d(e){var o;e.done?n(e.value):(o=e.value,o instanceof t?o:new t((function(e){e(o)}))).then(a,r)}d((i=i.apply(e,o||[])).next())}))};import*as dom from"../../dom.js";import{TimeoutTimer}from"../../../common/async.js";import{CancellationTokenSource}from"../../../common/cancellation.js";import{isMarkdownString}from"../../../common/htmlContent.js";import{stripIcons}from"../../../common/iconLabels.js";import{DisposableStore}from"../../../common/lifecycle.js";import{isFunction,isString}from"../../../common/types.js";import{localize}from"../../../../nls.js";export function setupNativeHover(e,o){isString(o)?e.title=stripIcons(o):(null==o?void 0:o.markdownNotSupportedFallback)?e.title=o.markdownNotSupportedFallback:e.removeAttribute("title")}class UpdatableHoverWidget{constructor(e,o,t){this.hoverDelegate=e,this.target=o,this.fadeInAnimation=t}update(e,o){var t;return __awaiter(this,void 0,void 0,(function*(){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let i;if(void 0===e||isString(e)||e instanceof HTMLElement)i=e;else if(isFunction(e.markdown)){this._hoverWidget||this.show(localize("iconLabel.loading","Loading..."),o),this._cancellationTokenSource=new CancellationTokenSource;const t=this._cancellationTokenSource.token;if(i=yield e.markdown(t),void 0===i&&(i=e.markdownNotSupportedFallback),this.isDisposed||t.isCancellationRequested)return}else i=null!==(t=e.markdown)&&void 0!==t?t:e.markdownNotSupportedFallback;this.show(i,o)}))}show(e,o){const t=this._hoverWidget;if(this.hasContent(e)){const i={content:e,target:this.target,showPointer:"element"===this.hoverDelegate.placement,hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!t};this._hoverWidget=this.hoverDelegate.showHover(i,o)}null==t||t.dispose()}hasContent(e){return!!e&&(!isMarkdownString(e)||!!e.value)}get isDisposed(){var e;return null===(e=this._hoverWidget)||void 0===e?void 0:e.isDisposed}dispose(){var e,o;null===(e=this._hoverWidget)||void 0===e||e.dispose(),null===(o=this._cancellationTokenSource)||void 0===o||o.dispose(!0),this._cancellationTokenSource=void 0}}export function setupCustomHover(e,o,t){let i,n;const s=(o,t)=>{var s;o&&(null==n||n.dispose(),n=void 0),t&&(null==i||i.dispose(),i=void 0),null===(s=e.onDidHideHover)||void 0===s||s.call(e)},a=(i,s,a)=>new TimeoutTimer((()=>__awaiter(this,void 0,void 0,(function*(){n&&!n.isDisposed||(n=new UpdatableHoverWidget(e,a||o,i>0),yield n.update(t,s))}))),i),r=dom.addDisposableListener(o,dom.EventType.MOUSE_OVER,(()=>{if(i)return;const t=new DisposableStore;t.add(dom.addDisposableListener(o,dom.EventType.MOUSE_LEAVE,(e=>s(!1,e.fromElement===o)),!0));t.add(dom.addDisposableListener(o,dom.EventType.MOUSE_DOWN,(()=>s(!0,!0)),!0));const n={targetElements:[o],dispose:()=>{}};if(void 0===e.placement||"mouse"===e.placement){const e=e=>n.x=e.x+10;t.add(dom.addDisposableListener(o,dom.EventType.MOUSE_MOVE,e,!0))}t.add(a(e.delay,!1,n)),i=t}),!0);return{show:e=>{s(!1,!0),a(0,e)},hide:()=>{s(!0,!0)},update:e=>__awaiter(this,void 0,void 0,(function*(){t=e,yield null==n?void 0:n.update(t)})),dispose:()=>{r.dispose(),s(!0,!0)}}}
//# sourceMappingURL=/sm/7dd9ef9c9b933fc9654faf2cdcc809120698e9ae95621e58158dd76f02c36118.map